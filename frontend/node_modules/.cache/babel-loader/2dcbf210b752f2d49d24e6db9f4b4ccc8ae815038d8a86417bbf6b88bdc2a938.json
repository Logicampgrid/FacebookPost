{"ast":null,"code":"import React,{useState,useEffect}from'react';import{CheckCircle,XCircle,RefreshCw}from'lucide-react';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const ConnectionStatus=_ref=>{let{API_BASE}=_ref;const[status,setStatus]=useState('checking');const[error,setError]=useState('');const checkConnection=async()=>{try{setStatus('checking');setError('');const response=await fetch(\"\".concat(API_BASE,\"/api/health\"),{method:'GET',headers:{'Content-Type':'application/json'}});if(response.ok){const data=await response.json();console.log('Backend health check:',data);setStatus('connected');}else{throw new Error(\"HTTP \".concat(response.status,\": \").concat(response.statusText));}}catch(err){console.error('Connection check failed:',err);setStatus('disconnected');setError(err.message);}};useEffect(()=>{checkConnection();},[API_BASE]);return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-3 rounded-lg border\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[status==='checking'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(RefreshCw,{className:\"w-4 h-4 animate-spin text-blue-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-blue-600\",children:\"V\\xE9rification de la connexion...\"})]}),status==='connected'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-4 h-4 text-green-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-green-600\",children:\"Connect\\xE9 au serveur\"})]}),status==='disconnected'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(XCircle,{className:\"w-4 h-4 text-red-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-red-600\",children:\"Connexion \\xE9chou\\xE9e\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:checkConnection,className:\"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded transition-colors\",children:\"Tester\"})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-xs text-red-600 bg-red-50 p-2 rounded\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Erreur:\"}),\" \",error]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-xs text-gray-500\",children:[\"Endpoint: \",API_BASE||'API via proxy',\"/api/health\"]})]});};export default ConnectionStatus;","map":{"version":3,"names":["React","useState","useEffect","CheckCircle","XCircle","RefreshCw","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ConnectionStatus","_ref","API_BASE","status","setStatus","error","setError","checkConnection","response","fetch","concat","method","headers","ok","data","json","console","log","Error","statusText","err","message","className","children","onClick"],"sources":["/app/frontend/src/components/ConnectionStatus.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { CheckCircle, XCircle, RefreshCw } from 'lucide-react';\n\nconst ConnectionStatus = ({ API_BASE }) => {\n  const [status, setStatus] = useState('checking');\n  const [error, setError] = useState('');\n\n  const checkConnection = async () => {\n    try {\n      setStatus('checking');\n      setError('');\n      \n      const response = await fetch(`${API_BASE}/api/health`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        console.log('Backend health check:', data);\n        setStatus('connected');\n      } else {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n      \n    } catch (err) {\n      console.error('Connection check failed:', err);\n      setStatus('disconnected');\n      setError(err.message);\n    }\n  };\n\n  useEffect(() => {\n    checkConnection();\n  }, [API_BASE]);\n\n  return (\n    <div className=\"mb-4 p-3 rounded-lg border\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center space-x-2\">\n          {status === 'checking' && (\n            <>\n              <RefreshCw className=\"w-4 h-4 animate-spin text-blue-500\" />\n              <span className=\"text-sm text-blue-600\">Vérification de la connexion...</span>\n            </>\n          )}\n          {status === 'connected' && (\n            <>\n              <CheckCircle className=\"w-4 h-4 text-green-500\" />\n              <span className=\"text-sm text-green-600\">Connecté au serveur</span>\n            </>\n          )}\n          {status === 'disconnected' && (\n            <>\n              <XCircle className=\"w-4 h-4 text-red-500\" />\n              <span className=\"text-sm text-red-600\">Connexion échouée</span>\n            </>\n          )}\n        </div>\n        \n        <button\n          onClick={checkConnection}\n          className=\"text-xs px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded transition-colors\"\n        >\n          Tester\n        </button>\n      </div>\n      \n      {error && (\n        <div className=\"mt-2 text-xs text-red-600 bg-red-50 p-2 rounded\">\n          <strong>Erreur:</strong> {error}\n        </div>\n      )}\n      \n      <div className=\"mt-2 text-xs text-gray-500\">\n        Endpoint: {API_BASE || 'API via proxy'}/api/health\n      </div>\n    </div>\n  );\n};\n\nexport default ConnectionStatus;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}