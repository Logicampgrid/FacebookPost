{"ast":null,"code":"import _objectSpread from\"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{Send,Image,Calendar,Users,Clock,Link,Instagram,MessageSquare,Plus,X,Target,Sparkles}from'lucide-react';import axios from'axios';import MediaUploader from'./MediaUploader';import PostPreview from'./PostPreview';import LinkPreview from'./LinkPreview';import SmartCrossPostSelector from'./SmartCrossPostSelector';import{useLinkDetection}from'../hooks/useLinkDetection';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_BASE=process.env.REACT_APP_BACKEND_URL;const PostCreator=_ref=>{let{user,selectedPlatform,selectedBusinessManager,allPlatforms,onPostCreated}=_ref;const[content,setContent]=useState('');const[mediaFiles,setMediaFiles]=useState([]);const[scheduledTime,setScheduledTime]=useState('');const[commentLink,setCommentLink]=useState('');const[commentText,setCommentText]=useState('');// New state for comment text\nconst[crossPostMode,setCrossPostMode]=useState(false);const[selectedCrossTargets,setSelectedCrossTargets]=useState([]);const[smartCrossPostMode,setSmartCrossPostMode]=useState(false);// New: Smart cross-post mode\nconst[loading,setLoading]=useState(false);// Hook pour la détection automatique des liens\nconst{detectedLinks,loading:linksLoading,removeLink,resetRemovedLinks}=useLinkDetection(content);const getPlatformIcon=(platform,type)=>{if(platform==='instagram')return/*#__PURE__*/_jsx(Instagram,{className:\"w-4 h-4 text-pink-500\"});if(type==='group')return/*#__PURE__*/_jsx(MessageSquare,{className:\"w-4 h-4 text-purple-500\"});return/*#__PURE__*/_jsx(Users,{className:\"w-4 h-4 text-blue-500\"});};const getAllAvailablePlatforms=()=>{const platforms=[];// Business platforms\nif(allPlatforms.business_pages){allPlatforms.business_pages.forEach(page=>{platforms.push(_objectSpread(_objectSpread({},page),{},{platform:'facebook',type:'page',source:'business'}));});}if(allPlatforms.business_groups){allPlatforms.business_groups.forEach(group=>{platforms.push(_objectSpread(_objectSpread({},group),{},{platform:'facebook',type:'group',source:'business'}));});}if(allPlatforms.business_instagram){allPlatforms.business_instagram.forEach(ig=>{platforms.push(_objectSpread(_objectSpread({},ig),{},{platform:'instagram',type:'instagram',source:'business'}));});}// Personal platforms\nif(allPlatforms.personal_pages){allPlatforms.personal_pages.forEach(page=>{platforms.push(_objectSpread(_objectSpread({},page),{},{platform:'facebook',type:'page',source:'personal'}));});}if(allPlatforms.personal_groups){allPlatforms.personal_groups.forEach(group=>{platforms.push(_objectSpread(_objectSpread({},group),{},{platform:'facebook',type:'group',source:'personal'}));});}return platforms;};const handleCrossTargetToggle=platform=>{setSelectedCrossTargets(prev=>{const exists=prev.find(t=>t.id===platform.id);if(exists){return prev.filter(t=>t.id!==platform.id);}else{return[...prev,{id:platform.id,name:platform.name||platform.username,platform:platform.platform,type:platform.type}];}});};const isInstagramCompatible=()=>{// Instagram requires media: either uploaded files OR links with images\nif(mediaFiles.length>0){return true;// Uploaded media has priority\n}// Check if any detected links have images\nif(detectedLinks.length>0&&detectedLinks.some(link=>link.image)){return true;}return false;};const getIncompatibleWarnings=()=>{const warnings=[];if(crossPostMode||smartCrossPostMode){const instagramTargets=selectedCrossTargets.filter(t=>t.platform==='instagram');if(instagramTargets.length>0&&!isInstagramCompatible()){warnings.push('Instagram nécessite au moins une image ou un lien avec image');}}else if((selectedPlatform===null||selectedPlatform===void 0?void 0:selectedPlatform.platform)==='instagram'&&!isInstagramCompatible()){warnings.push('Instagram nécessite au moins une image ou un lien avec image');}return warnings;};const handleSubmit=async e=>{e.preventDefault();// Allow empty content if there are media files\nif(!content.trim()&&mediaFiles.length===0){alert('Veuillez saisir un contenu ou ajouter des médias pour votre post');return;}if(!smartCrossPostMode&&!crossPostMode&&!selectedPlatform){alert('Veuillez sélectionner une plateforme');return;}if((crossPostMode||smartCrossPostMode)&&selectedCrossTargets.length===0){const modeText=smartCrossPostMode?'publication intelligente':'publication croisée';alert(\"Veuillez s\\xE9lectionner au moins une plateforme pour la \".concat(modeText));return;}const warnings=getIncompatibleWarnings();if(warnings.length>0){if(!window.confirm(\"Attention :\\n\".concat(warnings.join('\\n'),\"\\n\\nContinuer quand m\\xEAme ?\"))){return;}}try{setLoading(true);// Create post with FormData\nconst formData=new FormData();formData.append('user_id',user._id);formData.append('content',content.trim());if(crossPostMode||smartCrossPostMode){// Cross-posting mode (manual or smart)\nconst modeLabel=smartCrossPostMode?'Publication Intelligente':'Cross-post';formData.append('target_type','cross-post');formData.append('target_id','cross-post');formData.append('target_name',\"\".concat(modeLabel,\" (\").concat(selectedCrossTargets.length,\" plateformes)\"));formData.append('platform','meta');formData.append('cross_post_targets',JSON.stringify(selectedCrossTargets));}else{// Single platform mode\nformData.append('target_type',selectedPlatform.type);formData.append('target_id',selectedPlatform.id);formData.append('target_name',selectedPlatform.name||selectedPlatform.username);formData.append('platform',selectedPlatform.platform);}// Add Business Manager info if available\nif(selectedBusinessManager){formData.append('business_manager_id',selectedBusinessManager.id);formData.append('business_manager_name',selectedBusinessManager.name);}if(scheduledTime){formData.append('scheduled_time',scheduledTime);}// Add comment text if provided (Facebook only)\nif(commentText.trim()&&(!crossPostMode&&selectedPlatform.platform==='facebook'||crossPostMode&&selectedCrossTargets.some(t=>t.platform==='facebook'))){formData.append('comment_text',commentText.trim());}// Add comment link if provided (Facebook only) - for backward compatibility\nif(commentLink.trim()&&(!crossPostMode&&selectedPlatform.platform==='facebook'||crossPostMode&&selectedCrossTargets.some(t=>t.platform==='facebook'))){formData.append('comment_link',commentLink.trim());}const response=await axios.post(\"\".concat(API_BASE,\"/api/posts\"),formData,{headers:{'Content-Type':'multipart/form-data'}});const newPost=response.data.post;// Upload media if present\nif(mediaFiles.length>0){for(const file of mediaFiles){const mediaFormData=new FormData();mediaFormData.append('file',file);await axios.post(\"\".concat(API_BASE,\"/api/posts/\").concat(newPost.id,\"/media\"),mediaFormData,{headers:{'Content-Type':'multipart/form-data'}});}// Publish the post after media upload (if not scheduled)\nif(!scheduledTime){try{const publishResponse=await axios.post(\"\".concat(API_BASE,\"/api/posts/\").concat(newPost.id,\"/publish\"));console.log('Post published after media upload:',publishResponse.data);}catch(publishError){var _publishError$respons,_publishError$respons2;console.error('Error publishing post after media upload:',publishError);alert('Post créé avec médias mais échec de publication: '+(((_publishError$respons=publishError.response)===null||_publishError$respons===void 0?void 0:(_publishError$respons2=_publishError$respons.data)===null||_publishError$respons2===void 0?void 0:_publishError$respons2.detail)||'Erreur inconnue'));}}}else if(!scheduledTime){// No media files, publish immediately\ntry{const publishResponse=await axios.post(\"\".concat(API_BASE,\"/api/posts/\").concat(newPost.id,\"/publish\"));console.log('Post published immediately:',publishResponse.data);}catch(publishError){var _publishError$respons3,_publishError$respons4;console.error('Error publishing post:',publishError);alert('Post créé mais échec de publication: '+(((_publishError$respons3=publishError.response)===null||_publishError$respons3===void 0?void 0:(_publishError$respons4=_publishError$respons3.data)===null||_publishError$respons4===void 0?void 0:_publishError$respons4.detail)||'Erreur inconnue'));}}// Reset form\nsetContent('');setMediaFiles([]);setScheduledTime('');setCommentLink('');setCommentText('');// Reset comment text\nsetSelectedCrossTargets([]);setCrossPostMode(false);setSmartCrossPostMode(false);// Reset smart mode\nresetRemovedLinks();// Notify parent\nonPostCreated(newPost);// Show appropriate success message\nif(scheduledTime){alert('Post programmé avec succès !');}else{const successMessage=response.data.message||'Post créé et publié avec succès ! 🎉';alert(successMessage);}}catch(error){var _error$response,_error$response$data;console.error('Error creating post:',error);alert('Erreur lors de la création du post: '+(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||'Erreur inconnue'));}finally{setLoading(false);}};const getMinDateTime=()=>{const now=new Date();now.setMinutes(now.getMinutes()+5);return now.toISOString().slice(0,16);};const availablePlatforms=getAllAvailablePlatforms();return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"facebook-card p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(Send,{className:\"w-5 h-5 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-800\",children:\"Cr\\xE9er et publier sur Meta\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[crossPostMode?\"Publication crois\\xE9e sur \".concat(selectedCrossTargets.length,\" plateforme(s)\"):selectedPlatform?\"Publication sur: \".concat(selectedPlatform.name||selectedPlatform.username,\" (\").concat(selectedPlatform.platform,\")\"):'Sélectionnez une plateforme',selectedBusinessManager&&/*#__PURE__*/_jsxs(\"span\",{className:\"block text-xs text-blue-600\",children:[\"\\uD83D\\uDCCA Business Manager: \",selectedBusinessManager.name]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-medium text-gray-800 flex items-center\",children:[/*#__PURE__*/_jsx(Target,{className:\"w-4 h-4 mr-2\"}),\"Mode de publication\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:smartCrossPostMode?'Publication intelligente : Page + Instagram + Groupes automatiques':crossPostMode?'Publication croisée : Sélection manuelle des plateformes':'Publication simple : Une seule plateforme'})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setCrossPostMode(false);setSmartCrossPostMode(false);setSelectedCrossTargets([]);},className:\"px-4 py-2 rounded-lg font-medium transition-colors \".concat(!crossPostMode&&!smartCrossPostMode?'bg-blue-600 text-white':'bg-white text-gray-700 border border-gray-300 hover:bg-gray-50'),children:\"Simple\"}),(selectedPlatform===null||selectedPlatform===void 0?void 0:selectedPlatform.platform)==='facebook'&&(selectedPlatform===null||selectedPlatform===void 0?void 0:selectedPlatform.type)==='page'&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>{setCrossPostMode(false);setSmartCrossPostMode(true);setSelectedCrossTargets([]);},className:\"px-4 py-2 rounded-lg font-medium transition-colors flex items-center space-x-2 \".concat(smartCrossPostMode?'bg-purple-600 text-white shadow-lg':'bg-white text-gray-700 border border-gray-300 hover:bg-gray-50'),children:[/*#__PURE__*/_jsx(Sparkles,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Intelligent\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setCrossPostMode(true);setSmartCrossPostMode(false);setSelectedCrossTargets([]);},className:\"px-4 py-2 rounded-lg font-medium transition-colors \".concat(crossPostMode&&!smartCrossPostMode?'bg-green-600 text-white':'bg-white text-gray-700 border border-gray-300 hover:bg-gray-50'),children:\"Manuel\"})]})]}),smartCrossPostMode&&(selectedPlatform===null||selectedPlatform===void 0?void 0:selectedPlatform.platform)==='facebook'&&(selectedPlatform===null||selectedPlatform===void 0?void 0:selectedPlatform.type)==='page'&&/*#__PURE__*/_jsx(SmartCrossPostSelector,{selectedPlatform:selectedPlatform,user:user,onCrossTargetsChange:setSelectedCrossTargets,initialTargets:selectedCrossTargets})]}),crossPostMode&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-3\",children:[/*#__PURE__*/_jsx(Target,{className:\"w-4 h-4 inline mr-1\"}),\"S\\xE9lectionnez les plateformes (\",selectedCrossTargets.length,\" s\\xE9lectionn\\xE9e(s))\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-3\",children:availablePlatforms.map(platform=>{const isSelected=selectedCrossTargets.find(t=>t.id===platform.id);const isInstagram=platform.platform==='instagram';const isCompatible=!isInstagram||isInstagramCompatible();return/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>isCompatible&&handleCrossTargetToggle(platform),disabled:!isCompatible,className:\"p-3 rounded-lg border-2 transition-all text-left \".concat(isSelected?'border-blue-500 bg-blue-50':isCompatible?'border-gray-200 hover:border-gray-300 hover:bg-gray-50':'border-gray-100 bg-gray-50 opacity-50 cursor-not-allowed'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[getPlatformIcon(platform.platform,platform.type),/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-0 flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-sm truncate\",children:platform.name||platform.username}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 capitalize\",children:[platform.platform,\" \",platform.type]})]})]}),isSelected&&/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-white rounded-full\"})})]}),!isCompatible&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-red-500 mt-1\",children:\"N\\xE9cessite une image\"})]},\"\".concat(platform.source,\"-\").concat(platform.id));})}),selectedCrossTargets.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 flex flex-wrap gap-2\",children:selectedCrossTargets.map(target=>/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full\",children:[getPlatformIcon(target.platform,target.type),/*#__PURE__*/_jsx(\"span\",{className:\"ml-1\",children:target.name}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleCrossTargetToggle(target),className:\"ml-1 hover:text-blue-600\",children:/*#__PURE__*/_jsx(X,{className:\"w-3 h-3\"})})]},target.id))})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Contenu du post (optionnel si vous ajoutez des m\\xE9dias)\"}),/*#__PURE__*/_jsx(\"textarea\",{value:content,onChange:e=>setContent(e.target.value),placeholder:\"Que voulez-vous partager sur les plateformes Meta ? (Optionnel si vous ajoutez des images)\",className:\"facebook-textarea h-32\",disabled:loading}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 text-xs text-gray-500\",children:[content.length,\"/2000 caract\\xE8res\"]})]}),getIncompatibleWarnings().length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-yellow-50 border border-yellow-200 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Instagram,{className:\"w-4 h-4 text-yellow-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-yellow-800\",children:\"Attention Instagram\"})]}),getIncompatibleWarnings().map((warning,index)=>/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-yellow-700 mt-1\",children:[\"\\u26A0\\uFE0F \",warning]},index))]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(Image,{className:\"w-4 h-4 inline mr-1\"}),\"M\\xE9dias (prioritaire sur les images des liens)\"]}),/*#__PURE__*/_jsx(MediaUploader,{files:mediaFiles,onFilesChange:setMediaFiles,disabled:loading}),mediaFiles.length>0&&detectedLinks.some(link=>link.image)&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-blue-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"\\uD83D\\uDCF8 Priorit\\xE9 :\"}),\" Vos images upload\\xE9es seront utilis\\xE9es \\xE0 la place des images des liens d\\xE9tect\\xE9s\"]}),mediaFiles.length>0&&(detectedLinks.length>0||commentLink)&&(!crossPostMode&&(selectedPlatform===null||selectedPlatform===void 0?void 0:selectedPlatform.platform)==='facebook'||crossPostMode&&selectedCrossTargets.some(t=>t.platform==='facebook'))&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 p-4 bg-gradient-to-r from-blue-50 to-green-50 border-l-4 border-blue-400 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-2\",children:[/*#__PURE__*/_jsx(Target,{className:\"w-5 h-5 text-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-bold text-blue-800\",children:\"\\uD83D\\uDD17 Mode Partage Facebook Natif Activ\\xE9!\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-700\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u2728 Fonctionnement EXACT de Facebook :\"}),\" Votre lien sera post\\xE9 comme si vous colliez l'URL directement sur Facebook \",' ',detectedLinks.length>0?/*#__PURE__*/_jsx(\"span\",{className:\"font-mono bg-blue-100 px-2 py-1 rounded text-xs\",children:detectedLinks[0].url.length>40?\"\".concat(detectedLinks[0].url.substring(0,40),\"...\"):detectedLinks[0].url}):/*#__PURE__*/_jsx(\"span\",{className:\"font-mono bg-blue-100 px-2 py-1 rounded text-xs\",children:\"le lien du commentaire\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded p-2 border border-blue-200\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-600 mb-1\",children:[\"\\uD83E\\uDD16 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Facebook va automatiquement :\"})]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"text-xs text-gray-600 space-y-1 ml-4\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 Analyser votre lien pour r\\xE9cup\\xE9rer l'image et les infos\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 Cr\\xE9er un aper\\xE7u avec l'image de votre produit\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 Rendre TOUTE la zone cliquable \\u2192 redirection vers votre site\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 text-xs text-gray-500 mt-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-2 h-2 bg-blue-400 rounded-full mr-1\"}),\"Scraping automatique\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-2 h-2 bg-green-400 rounded-full mr-1\"}),\"100% natif Facebook\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-2 h-2 bg-purple-400 rounded-full mr-1\"}),\"Cliquable partout\"]})]})]})]})]}),(!crossPostMode&&!smartCrossPostMode&&(selectedPlatform===null||selectedPlatform===void 0?void 0:selectedPlatform.platform)==='facebook'||(crossPostMode||smartCrossPostMode)&&selectedCrossTargets.some(t=>t.platform==='facebook'))&&/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"border-t pt-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-sm font-medium text-gray-700 mb-3 flex items-center\",children:[/*#__PURE__*/_jsx(MessageSquare,{className:\"w-4 h-4 mr-2\"}),\"Commentaire automatique & Liens cliquables (Facebook)\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-700 mb-2\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDCA1 Strat\\xE9gie optimis\\xE9e :\"})}),/*#__PURE__*/_jsxs(\"ul\",{className:\"text-xs text-blue-600 space-y-1\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Images cliquables :\"}),\" Si vous ajoutez un lien, l'image deviendra cliquable (comme Facebook Share)\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Commentaire automatique :\"}),\" Maximise l'engagement et la port\\xE9e organique\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Double redirection :\"}),\" Clic sur image OU lien dans commentaire = m\\xEAme destination\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"\\uD83D\\uDCAC Texte du commentaire\"}),/*#__PURE__*/_jsx(\"textarea\",{value:commentText,onChange:e=>setCommentText(e.target.value),placeholder:\"Ex: 'Qu'est-ce que vous en pensez ?' ou 'D\\xE9couvrez tous nos mod\\xE8les sur notre site !'\",className:\"facebook-textarea h-20 text-sm\",disabled:loading}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 text-xs text-gray-500\",children:[commentText.length,\"/500 caract\\xE8res\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(Link,{className:\"w-4 h-4 inline mr-1\"}),\"\\uD83D\\uDD17 Lien pour images cliquables + commentaire\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",value:commentLink,onChange:e=>setCommentLink(e.target.value),placeholder:\"https://votre-site.com/produit - Rend les images cliquables ET sera ajout\\xE9 en commentaire\",className:\"facebook-input w-full text-sm\",disabled:loading}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"\\uD83C\\uDFAF Ce lien servira \\xE0 la fois pour rendre l'image cliquable ET sera visible dans le commentaire\"})]}),(commentText||commentLink)&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-800 font-medium mb-1\",children:\"\\uD83D\\uDCDD Aper\\xE7u du commentaire automatique :\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-blue-700 bg-white p-2 rounded border\",children:[commentText&&/*#__PURE__*/_jsx(\"div\",{children:commentText}),commentLink&&/*#__PURE__*/_jsxs(\"div\",{className:commentText?\"mt-2 pt-2 border-t border-blue-200\":\"\",children:[\"\\uD83D\\uDD17 \",/*#__PURE__*/_jsx(\"a\",{href:commentLink,className:\"text-blue-600 underline\",target:\"_blank\",rel:\"noopener noreferrer\",children:commentLink})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-blue-600 mt-2 space-y-1\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u2728 Ce commentaire sera automatiquement ajout\\xE9 apr\\xE8s la publication\"}),commentLink&&mediaFiles.length>0&&/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83C\\uDFAF \",/*#__PURE__*/_jsx(\"strong\",{children:\"Bonus :\"}),\" L'image sera \\xE9galement cliquable et redirigera vers ce lien !\"]})]})]})]})}),(detectedLinks.length>0||linksLoading)&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(Link,{className:\"w-4 h-4 inline mr-1\"}),\"Liens d\\xE9tect\\xE9s\",linksLoading&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-xs text-gray-500\",children:\"(Chargement...)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[linksLoading&&detectedLinks.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-200 rounded-lg p-4 bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"animate-pulse\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-3 bg-gray-300 rounded mb-2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-2 bg-gray-300 rounded w-3/4\"})]})}),detectedLinks.map((link,index)=>/*#__PURE__*/_jsx(LinkPreview,{link:link,onRemove:removeLink},\"\".concat(link.url,\"-\").concat(index)))]}),detectedLinks.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 mt-1\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-green-600 font-medium\",children:[\"\\u2713 \",detectedLinks.length,\" lien(s) d\\xE9tect\\xE9(s) avec pr\\xE9visualisation\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Les images et m\\xE9tadonn\\xE9es s'afficheront automatiquement sur toutes les plateformes\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(Clock,{className:\"w-4 h-4 inline mr-1\"}),\"Programmer la publication (optionnel)\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:scheduledTime,onChange:e=>setScheduledTime(e.target.value),min:getMinDateTime(),className:\"facebook-input w-full max-w-xs\",disabled:loading}),scheduledTime&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[\"Sera publi\\xE9 le \",new Date(scheduledTime).toLocaleString('fr-FR')]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center pt-4 border-t\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:crossPostMode||smartCrossPostMode?selectedCrossTargets.length>0?/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[smartCrossPostMode?/*#__PURE__*/_jsx(Sparkles,{className:\"w-4 h-4 mr-1 text-purple-500\"}):/*#__PURE__*/_jsx(Target,{className:\"w-4 h-4 mr-1\"}),selectedCrossTargets.length,\" plateforme(s) s\\xE9lectionn\\xE9e(s)\",smartCrossPostMode&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-1 text-purple-600\",children:\"(Intelligent)\"})]}):'Sélectionnez des plateformes':selectedPlatform?/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[getPlatformIcon(selectedPlatform.platform,selectedPlatform.type),/*#__PURE__*/_jsx(\"span\",{className:\"ml-1\",children:selectedPlatform.name||selectedPlatform.username})]}):'Sélectionnez une plateforme'}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading||!content.trim()&&mediaFiles.length===0||!crossPostMode&&!smartCrossPostMode&&!selectedPlatform||(crossPostMode||smartCrossPostMode)&&selectedCrossTargets.length===0,className:\"facebook-button disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2\",children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Publication...\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[smartCrossPostMode?/*#__PURE__*/_jsx(Sparkles,{className:\"w-4 h-4\"}):/*#__PURE__*/_jsx(Send,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:scheduledTime?'Programmer':smartCrossPostMode?\"\\uD83E\\uDDE0 Publication Intelligente (\".concat(selectedCrossTargets.length,\")\"):crossPostMode?\"Publier sur \".concat(selectedCrossTargets.length,\" plateformes\"):'Publier'})]})})]})]})]}),(content||mediaFiles.length>0)&&/*#__PURE__*/_jsxs(\"div\",{className:\"facebook-card p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-800 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-5 h-5 mr-2\"}),\"Aper\\xE7u du post\"]}),/*#__PURE__*/_jsx(PostPreview,{content:content,mediaFiles:mediaFiles,detectedLinks:detectedLinks,pageName:crossPostMode||smartCrossPostMode?smartCrossPostMode?'Publication Intelligente':'Multi-plateforme':(selectedPlatform===null||selectedPlatform===void 0?void 0:selectedPlatform.name)||(selectedPlatform===null||selectedPlatform===void 0?void 0:selectedPlatform.username)||'Ma Page',timestamp:\"\\xC0 l'instant\",platform:crossPostMode||smartCrossPostMode?'meta':selectedPlatform===null||selectedPlatform===void 0?void 0:selectedPlatform.platform}),(crossPostMode||smartCrossPostMode)&&selectedCrossTargets.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-3 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-gray-700 mb-2 flex items-center\",children:[smartCrossPostMode&&/*#__PURE__*/_jsx(Sparkles,{className:\"w-4 h-4 mr-1 text-purple-600\"}),\"Publication sur :\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:selectedCrossTargets.map(target=>/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2 py-1 bg-white border border-gray-200 text-xs rounded\",children:[getPlatformIcon(target.platform,target.type),/*#__PURE__*/_jsx(\"span\",{className:\"ml-1\",children:target.name})]},target.id))})]})]})]});};export default PostCreator;","map":{"version":3,"names":["React","useState","Send","Image","Calendar","Users","Clock","Link","Instagram","MessageSquare","Plus","X","Target","Sparkles","axios","MediaUploader","PostPreview","LinkPreview","SmartCrossPostSelector","useLinkDetection","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_BASE","process","env","REACT_APP_BACKEND_URL","PostCreator","_ref","user","selectedPlatform","selectedBusinessManager","allPlatforms","onPostCreated","content","setContent","mediaFiles","setMediaFiles","scheduledTime","setScheduledTime","commentLink","setCommentLink","commentText","setCommentText","crossPostMode","setCrossPostMode","selectedCrossTargets","setSelectedCrossTargets","smartCrossPostMode","setSmartCrossPostMode","loading","setLoading","detectedLinks","linksLoading","removeLink","resetRemovedLinks","getPlatformIcon","platform","type","className","getAllAvailablePlatforms","platforms","business_pages","forEach","page","push","_objectSpread","source","business_groups","group","business_instagram","ig","personal_pages","personal_groups","handleCrossTargetToggle","prev","exists","find","t","id","filter","name","username","isInstagramCompatible","length","some","link","image","getIncompatibleWarnings","warnings","instagramTargets","handleSubmit","e","preventDefault","trim","alert","modeText","concat","window","confirm","join","formData","FormData","append","_id","modeLabel","JSON","stringify","response","post","headers","newPost","data","file","mediaFormData","publishResponse","console","log","publishError","_publishError$respons","_publishError$respons2","error","detail","_publishError$respons3","_publishError$respons4","successMessage","message","_error$response","_error$response$data","getMinDateTime","now","Date","setMinutes","getMinutes","toISOString","slice","availablePlatforms","children","onClick","onCrossTargetsChange","initialTargets","map","isSelected","isInstagram","isCompatible","disabled","target","onSubmit","value","onChange","placeholder","warning","index","files","onFilesChange","url","substring","href","rel","onRemove","min","toLocaleString","pageName","timestamp"],"sources":["/app/frontend/src/components/PostCreator.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Send, Image, Calendar, Users, Clock, Link, Instagram, MessageSquare, Plus, X, Target, Sparkles } from 'lucide-react';\nimport axios from 'axios';\nimport MediaUploader from './MediaUploader';\nimport PostPreview from './PostPreview';\nimport LinkPreview from './LinkPreview';\nimport SmartCrossPostSelector from './SmartCrossPostSelector';\nimport { useLinkDetection } from '../hooks/useLinkDetection';\n\nconst API_BASE = process.env.REACT_APP_BACKEND_URL;\n\nconst PostCreator = ({ user, selectedPlatform, selectedBusinessManager, allPlatforms, onPostCreated }) => {\n  const [content, setContent] = useState('');\n  const [mediaFiles, setMediaFiles] = useState([]);\n  const [scheduledTime, setScheduledTime] = useState('');\n  const [commentLink, setCommentLink] = useState('');\n  const [commentText, setCommentText] = useState('');  // New state for comment text\n  const [crossPostMode, setCrossPostMode] = useState(false);\n  const [selectedCrossTargets, setSelectedCrossTargets] = useState([]);\n  const [smartCrossPostMode, setSmartCrossPostMode] = useState(false);  // New: Smart cross-post mode\n  const [loading, setLoading] = useState(false);\n\n  // Hook pour la détection automatique des liens\n  const { detectedLinks, loading: linksLoading, removeLink, resetRemovedLinks } = useLinkDetection(content);\n\n  const getPlatformIcon = (platform, type) => {\n    if (platform === 'instagram') return <Instagram className=\"w-4 h-4 text-pink-500\" />;\n    if (type === 'group') return <MessageSquare className=\"w-4 h-4 text-purple-500\" />;\n    return <Users className=\"w-4 h-4 text-blue-500\" />;\n  };\n\n  const getAllAvailablePlatforms = () => {\n    const platforms = [];\n    \n    // Business platforms\n    if (allPlatforms.business_pages) {\n      allPlatforms.business_pages.forEach(page => {\n        platforms.push({\n          ...page,\n          platform: 'facebook',\n          type: 'page',\n          source: 'business'\n        });\n      });\n    }\n    \n    if (allPlatforms.business_groups) {\n      allPlatforms.business_groups.forEach(group => {\n        platforms.push({\n          ...group,\n          platform: 'facebook',\n          type: 'group',\n          source: 'business'\n        });\n      });\n    }\n    \n    if (allPlatforms.business_instagram) {\n      allPlatforms.business_instagram.forEach(ig => {\n        platforms.push({\n          ...ig,\n          platform: 'instagram',\n          type: 'instagram',\n          source: 'business'\n        });\n      });\n    }\n    \n    // Personal platforms\n    if (allPlatforms.personal_pages) {\n      allPlatforms.personal_pages.forEach(page => {\n        platforms.push({\n          ...page,\n          platform: 'facebook',\n          type: 'page',\n          source: 'personal'\n        });\n      });\n    }\n    \n    if (allPlatforms.personal_groups) {\n      allPlatforms.personal_groups.forEach(group => {\n        platforms.push({\n          ...group,\n          platform: 'facebook',\n          type: 'group',\n          source: 'personal'\n        });\n      });\n    }\n    \n    return platforms;\n  };\n\n  const handleCrossTargetToggle = (platform) => {\n    setSelectedCrossTargets(prev => {\n      const exists = prev.find(t => t.id === platform.id);\n      if (exists) {\n        return prev.filter(t => t.id !== platform.id);\n      } else {\n        return [...prev, {\n          id: platform.id,\n          name: platform.name || platform.username,\n          platform: platform.platform,\n          type: platform.type\n        }];\n      }\n    });\n  };\n\n  const isInstagramCompatible = () => {\n    // Instagram requires media: either uploaded files OR links with images\n    if (mediaFiles.length > 0) {\n      return true; // Uploaded media has priority\n    }\n    \n    // Check if any detected links have images\n    if (detectedLinks.length > 0 && detectedLinks.some(link => link.image)) {\n      return true;\n    }\n    \n    return false;\n  };\n\n  const getIncompatibleWarnings = () => {\n    const warnings = [];\n    \n    if (crossPostMode || smartCrossPostMode) {\n      const instagramTargets = selectedCrossTargets.filter(t => t.platform === 'instagram');\n      if (instagramTargets.length > 0 && !isInstagramCompatible()) {\n        warnings.push('Instagram nécessite au moins une image ou un lien avec image');\n      }\n    } else if (selectedPlatform?.platform === 'instagram' && !isInstagramCompatible()) {\n      warnings.push('Instagram nécessite au moins une image ou un lien avec image');\n    }\n    \n    return warnings;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    // Allow empty content if there are media files\n    if (!content.trim() && mediaFiles.length === 0) {\n      alert('Veuillez saisir un contenu ou ajouter des médias pour votre post');\n      return;\n    }\n    \n    if (!smartCrossPostMode && !crossPostMode && !selectedPlatform) {\n      alert('Veuillez sélectionner une plateforme');\n      return;\n    }\n    \n    if ((crossPostMode || smartCrossPostMode) && selectedCrossTargets.length === 0) {\n      const modeText = smartCrossPostMode ? 'publication intelligente' : 'publication croisée';\n      alert(`Veuillez sélectionner au moins une plateforme pour la ${modeText}`);\n      return;\n    }\n\n    const warnings = getIncompatibleWarnings();\n    if (warnings.length > 0) {\n      if (!window.confirm(`Attention :\\n${warnings.join('\\n')}\\n\\nContinuer quand même ?`)) {\n        return;\n      }\n    }\n\n    try {\n      setLoading(true);\n\n      // Create post with FormData\n      const formData = new FormData();\n      formData.append('user_id', user._id);\n      formData.append('content', content.trim());\n      \n      if (crossPostMode || smartCrossPostMode) {\n        // Cross-posting mode (manual or smart)\n        const modeLabel = smartCrossPostMode ? 'Publication Intelligente' : 'Cross-post';\n        formData.append('target_type', 'cross-post');\n        formData.append('target_id', 'cross-post');\n        formData.append('target_name', `${modeLabel} (${selectedCrossTargets.length} plateformes)`);\n        formData.append('platform', 'meta');\n        formData.append('cross_post_targets', JSON.stringify(selectedCrossTargets));\n      } else {\n        // Single platform mode\n        formData.append('target_type', selectedPlatform.type);\n        formData.append('target_id', selectedPlatform.id);\n        formData.append('target_name', selectedPlatform.name || selectedPlatform.username);\n        formData.append('platform', selectedPlatform.platform);\n      }\n      \n      // Add Business Manager info if available\n      if (selectedBusinessManager) {\n        formData.append('business_manager_id', selectedBusinessManager.id);\n        formData.append('business_manager_name', selectedBusinessManager.name);\n      }\n      \n      if (scheduledTime) {\n        formData.append('scheduled_time', scheduledTime);\n      }\n      \n      // Add comment text if provided (Facebook only)\n      if (commentText.trim() && (\n        !crossPostMode && selectedPlatform.platform === 'facebook' ||\n        crossPostMode && selectedCrossTargets.some(t => t.platform === 'facebook')\n      )) {\n        formData.append('comment_text', commentText.trim());\n      }\n      \n      // Add comment link if provided (Facebook only) - for backward compatibility\n      if (commentLink.trim() && (\n        !crossPostMode && selectedPlatform.platform === 'facebook' ||\n        crossPostMode && selectedCrossTargets.some(t => t.platform === 'facebook')\n      )) {\n        formData.append('comment_link', commentLink.trim());\n      }\n\n      const response = await axios.post(`${API_BASE}/api/posts`, formData, {\n        headers: { 'Content-Type': 'multipart/form-data' }\n      });\n\n      const newPost = response.data.post;\n\n      // Upload media if present\n      if (mediaFiles.length > 0) {\n        for (const file of mediaFiles) {\n          const mediaFormData = new FormData();\n          mediaFormData.append('file', file);\n          \n          await axios.post(`${API_BASE}/api/posts/${newPost.id}/media`, mediaFormData, {\n            headers: { 'Content-Type': 'multipart/form-data' }\n          });\n        }\n        \n        // Publish the post after media upload (if not scheduled)\n        if (!scheduledTime) {\n          try {\n            const publishResponse = await axios.post(`${API_BASE}/api/posts/${newPost.id}/publish`);\n            console.log('Post published after media upload:', publishResponse.data);\n          } catch (publishError) {\n            console.error('Error publishing post after media upload:', publishError);\n            alert('Post créé avec médias mais échec de publication: ' + (publishError.response?.data?.detail || 'Erreur inconnue'));\n          }\n        }\n      } else if (!scheduledTime) {\n        // No media files, publish immediately\n        try {\n          const publishResponse = await axios.post(`${API_BASE}/api/posts/${newPost.id}/publish`);\n          console.log('Post published immediately:', publishResponse.data);\n        } catch (publishError) {\n          console.error('Error publishing post:', publishError);\n          alert('Post créé mais échec de publication: ' + (publishError.response?.data?.detail || 'Erreur inconnue'));\n        }\n      }\n\n      // Reset form\n      setContent('');\n      setMediaFiles([]);\n      setScheduledTime('');\n      setCommentLink('');\n      setCommentText('');  // Reset comment text\n      setSelectedCrossTargets([]);\n      setCrossPostMode(false);\n      setSmartCrossPostMode(false);  // Reset smart mode\n      resetRemovedLinks();\n\n      // Notify parent\n      onPostCreated(newPost);\n\n      // Show appropriate success message\n      if (scheduledTime) {\n        alert('Post programmé avec succès !');\n      } else {\n        const successMessage = response.data.message || 'Post créé et publié avec succès ! 🎉';\n        alert(successMessage);\n      }\n      \n    } catch (error) {\n      console.error('Error creating post:', error);\n      alert('Erreur lors de la création du post: ' + (error.response?.data?.detail || 'Erreur inconnue'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getMinDateTime = () => {\n    const now = new Date();\n    now.setMinutes(now.getMinutes() + 5);\n    return now.toISOString().slice(0, 16);\n  };\n\n  const availablePlatforms = getAllAvailablePlatforms();\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Post Creator */}\n      <div className=\"facebook-card p-6\">\n        <div className=\"flex items-center space-x-3 mb-4\">\n          <div className=\"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center\">\n            <Send className=\"w-5 h-5 text-white\" />\n          </div>\n          <div>\n            <h2 className=\"text-xl font-semibold text-gray-800\">Créer et publier sur Meta</h2>\n            <p className=\"text-sm text-gray-600\">\n              {crossPostMode ? (\n                `Publication croisée sur ${selectedCrossTargets.length} plateforme(s)`\n              ) : (\n                selectedPlatform ? \n                  `Publication sur: ${selectedPlatform.name || selectedPlatform.username} (${selectedPlatform.platform})` :\n                  'Sélectionnez une plateforme'\n              )}\n              {selectedBusinessManager && (\n                <span className=\"block text-xs text-blue-600\">\n                  📊 Business Manager: {selectedBusinessManager.name}\n                </span>\n              )}\n            </p>\n          </div>\n        </div>\n\n        {/* Publication Mode Selector */}\n        <div className=\"mb-6 space-y-4\">\n          {/* Mode Selection Buttons */}\n          <div className=\"p-4 bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div>\n                <h3 className=\"font-medium text-gray-800 flex items-center\">\n                  <Target className=\"w-4 h-4 mr-2\" />\n                  Mode de publication\n                </h3>\n                <p className=\"text-sm text-gray-600 mt-1\">\n                  {smartCrossPostMode ? \n                    'Publication intelligente : Page + Instagram + Groupes automatiques' :\n                    crossPostMode ? \n                      'Publication croisée : Sélection manuelle des plateformes' : \n                      'Publication simple : Une seule plateforme'\n                  }\n                </p>\n              </div>\n            </div>\n            \n            <div className=\"flex space-x-2\">\n              {/* Simple Mode */}\n              <button\n                type=\"button\"\n                onClick={() => {\n                  setCrossPostMode(false);\n                  setSmartCrossPostMode(false);\n                  setSelectedCrossTargets([]);\n                }}\n                className={`px-4 py-2 rounded-lg font-medium transition-colors ${\n                  !crossPostMode && !smartCrossPostMode\n                    ? 'bg-blue-600 text-white' \n                    : 'bg-white text-gray-700 border border-gray-300 hover:bg-gray-50'\n                }`}\n              >\n                Simple\n              </button>\n              \n              {/* Smart Cross-post Mode - Only for Facebook pages */}\n              {selectedPlatform?.platform === 'facebook' && selectedPlatform?.type === 'page' && (\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setCrossPostMode(false);\n                    setSmartCrossPostMode(true);\n                    setSelectedCrossTargets([]);\n                  }}\n                  className={`px-4 py-2 rounded-lg font-medium transition-colors flex items-center space-x-2 ${\n                    smartCrossPostMode\n                      ? 'bg-purple-600 text-white shadow-lg' \n                      : 'bg-white text-gray-700 border border-gray-300 hover:bg-gray-50'\n                  }`}\n                >\n                  <Sparkles className=\"w-4 h-4\" />\n                  <span>Intelligent</span>\n                </button>\n              )}\n              \n              {/* Manual Cross-post Mode */}\n              <button\n                type=\"button\"\n                onClick={() => {\n                  setCrossPostMode(true);\n                  setSmartCrossPostMode(false);\n                  setSelectedCrossTargets([]);\n                }}\n                className={`px-4 py-2 rounded-lg font-medium transition-colors ${\n                  crossPostMode && !smartCrossPostMode\n                    ? 'bg-green-600 text-white' \n                    : 'bg-white text-gray-700 border border-gray-300 hover:bg-gray-50'\n                }`}\n              >\n                Manuel\n              </button>\n            </div>\n          </div>\n          \n          {/* Smart Cross-post Selector */}\n          {smartCrossPostMode && selectedPlatform?.platform === 'facebook' && selectedPlatform?.type === 'page' && (\n            <SmartCrossPostSelector\n              selectedPlatform={selectedPlatform}\n              user={user}\n              onCrossTargetsChange={setSelectedCrossTargets}\n              initialTargets={selectedCrossTargets}\n            />\n          )}\n        </div>\n\n        {/* Cross-post platform selection */}\n        {crossPostMode && (\n          <div className=\"mb-6\">\n            <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n              <Target className=\"w-4 h-4 inline mr-1\" />\n              Sélectionnez les plateformes ({selectedCrossTargets.length} sélectionnée(s))\n            </label>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-3\">\n              {availablePlatforms.map((platform) => {\n                const isSelected = selectedCrossTargets.find(t => t.id === platform.id);\n                const isInstagram = platform.platform === 'instagram';\n                const isCompatible = !isInstagram || isInstagramCompatible();\n                \n                return (\n                  <button\n                    key={`${platform.source}-${platform.id}`}\n                    type=\"button\"\n                    onClick={() => isCompatible && handleCrossTargetToggle(platform)}\n                    disabled={!isCompatible}\n                    className={`p-3 rounded-lg border-2 transition-all text-left ${\n                      isSelected \n                        ? 'border-blue-500 bg-blue-50' \n                        : isCompatible\n                          ? 'border-gray-200 hover:border-gray-300 hover:bg-gray-50'\n                          : 'border-gray-100 bg-gray-50 opacity-50 cursor-not-allowed'\n                    }`}\n                  >\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center space-x-2\">\n                        {getPlatformIcon(platform.platform, platform.type)}\n                        <div className=\"min-w-0 flex-1\">\n                          <div className=\"font-medium text-sm truncate\">\n                            {platform.name || platform.username}\n                          </div>\n                          <div className=\"text-xs text-gray-500 capitalize\">\n                            {platform.platform} {platform.type}\n                          </div>\n                        </div>\n                      </div>\n                      {isSelected && (\n                        <div className=\"w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center\">\n                          <div className=\"w-2 h-2 bg-white rounded-full\" />\n                        </div>\n                      )}\n                    </div>\n                    {!isCompatible && (\n                      <div className=\"text-xs text-red-500 mt-1\">\n                        Nécessite une image\n                      </div>\n                    )}\n                  </button>\n                );\n              })}\n            </div>\n            {selectedCrossTargets.length > 0 && (\n              <div className=\"mt-3 flex flex-wrap gap-2\">\n                {selectedCrossTargets.map((target) => (\n                  <span\n                    key={target.id}\n                    className=\"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full\"\n                  >\n                    {getPlatformIcon(target.platform, target.type)}\n                    <span className=\"ml-1\">{target.name}</span>\n                    <button\n                      type=\"button\"\n                      onClick={() => handleCrossTargetToggle(target)}\n                      className=\"ml-1 hover:text-blue-600\"\n                    >\n                      <X className=\"w-3 h-3\" />\n                    </button>\n                  </span>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          {/* Content Input */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Contenu du post (optionnel si vous ajoutez des médias)\n            </label>\n            <textarea\n              value={content}\n              onChange={(e) => setContent(e.target.value)}\n              placeholder=\"Que voulez-vous partager sur les plateformes Meta ? (Optionnel si vous ajoutez des images)\"\n              className=\"facebook-textarea h-32\"\n              disabled={loading}\n            />\n            <div className=\"mt-1 text-xs text-gray-500\">\n              {content.length}/2000 caractères\n            </div>\n          </div>\n\n          {/* Compatibility warnings */}\n          {getIncompatibleWarnings().length > 0 && (\n            <div className=\"p-3 bg-yellow-50 border border-yellow-200 rounded-lg\">\n              <div className=\"flex items-center space-x-2\">\n                <Instagram className=\"w-4 h-4 text-yellow-600\" />\n                <span className=\"text-sm font-medium text-yellow-800\">Attention Instagram</span>\n              </div>\n              {getIncompatibleWarnings().map((warning, index) => (\n                <p key={index} className=\"text-sm text-yellow-700 mt-1\">⚠️ {warning}</p>\n              ))}\n            </div>\n          )}\n\n          {/* Media Upload */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              <Image className=\"w-4 h-4 inline mr-1\" />\n              Médias (prioritaire sur les images des liens)\n            </label>\n            <MediaUploader \n              files={mediaFiles} \n              onFilesChange={setMediaFiles}\n              disabled={loading}\n            />\n            {mediaFiles.length > 0 && detectedLinks.some(link => link.image) && (\n              <div className=\"mt-2 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-blue-700\">\n                <span className=\"font-medium\">📸 Priorité :</span> Vos images uploadées seront utilisées à la place des images des liens détectés\n              </div>\n            )}\n            \n            {/* NATIVE Facebook Link Sharing Indicator */}\n            {mediaFiles.length > 0 && (detectedLinks.length > 0 || commentLink) && (\n              (!crossPostMode && selectedPlatform?.platform === 'facebook') || \n              (crossPostMode && selectedCrossTargets.some(t => t.platform === 'facebook'))\n            ) && (\n              <div className=\"mt-2 p-4 bg-gradient-to-r from-blue-50 to-green-50 border-l-4 border-blue-400 rounded-lg\">\n                <div className=\"flex items-center space-x-2 mb-2\">\n                  <Target className=\"w-5 h-5 text-blue-600\" />\n                  <span className=\"text-sm font-bold text-blue-800\">🔗 Mode Partage Facebook Natif Activé!</span>\n                </div>\n                <div className=\"space-y-2\">\n                  <p className=\"text-sm text-blue-700\">\n                    <strong>✨ Fonctionnement EXACT de Facebook :</strong> Votre lien sera posté comme si vous colliez l'URL directement sur Facebook {' '}\n                    {detectedLinks.length > 0 ? (\n                      <span className=\"font-mono bg-blue-100 px-2 py-1 rounded text-xs\">\n                        {detectedLinks[0].url.length > 40 ? \n                          `${detectedLinks[0].url.substring(0, 40)}...` : \n                          detectedLinks[0].url\n                        }\n                      </span>\n                    ) : (\n                      <span className=\"font-mono bg-blue-100 px-2 py-1 rounded text-xs\">\n                        le lien du commentaire\n                      </span>\n                    )}\n                  </p>\n                  <div className=\"bg-white rounded p-2 border border-blue-200\">\n                    <p className=\"text-xs text-gray-600 mb-1\">🤖 <strong>Facebook va automatiquement :</strong></p>\n                    <ul className=\"text-xs text-gray-600 space-y-1 ml-4\">\n                      <li>• Analyser votre lien pour récupérer l'image et les infos</li>\n                      <li>• Créer un aperçu avec l'image de votre produit</li>\n                      <li>• Rendre TOUTE la zone cliquable → redirection vers votre site</li>\n                    </ul>\n                  </div>\n                  <div className=\"flex items-center space-x-4 text-xs text-gray-500 mt-2\">\n                    <span className=\"flex items-center\">\n                      <span className=\"w-2 h-2 bg-blue-400 rounded-full mr-1\"></span>\n                      Scraping automatique\n                    </span>\n                    <span className=\"flex items-center\">\n                      <span className=\"w-2 h-2 bg-green-400 rounded-full mr-1\"></span>\n                      100% natif Facebook\n                    </span>\n                    <span className=\"flex items-center\">\n                      <span className=\"w-2 h-2 bg-purple-400 rounded-full mr-1\"></span>\n                      Cliquable partout\n                    </span>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Enhanced Comment Section - Facebook only */}\n          {((!crossPostMode && !smartCrossPostMode && selectedPlatform?.platform === 'facebook') || \n            ((crossPostMode || smartCrossPostMode) && selectedCrossTargets.some(t => t.platform === 'facebook'))) && (\n            <div className=\"space-y-4\">\n              <div className=\"border-t pt-4\">\n                <h3 className=\"text-sm font-medium text-gray-700 mb-3 flex items-center\">\n                  <MessageSquare className=\"w-4 h-4 mr-2\" />\n                  Commentaire automatique & Liens cliquables (Facebook)\n                </h3>\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4\">\n                  <p className=\"text-xs text-blue-700 mb-2\">\n                    <strong>💡 Stratégie optimisée :</strong>\n                  </p>\n                  <ul className=\"text-xs text-blue-600 space-y-1\">\n                    <li>• <strong>Images cliquables :</strong> Si vous ajoutez un lien, l'image deviendra cliquable (comme Facebook Share)</li>\n                    <li>• <strong>Commentaire automatique :</strong> Maximise l'engagement et la portée organique</li>\n                    <li>• <strong>Double redirection :</strong> Clic sur image OU lien dans commentaire = même destination</li>\n                  </ul>\n                </div>\n                \n                {/* Comment Text */}\n                <div className=\"mb-4\">\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    💬 Texte du commentaire\n                  </label>\n                  <textarea\n                    value={commentText}\n                    onChange={(e) => setCommentText(e.target.value)}\n                    placeholder=\"Ex: 'Qu'est-ce que vous en pensez ?' ou 'Découvrez tous nos modèles sur notre site !'\"\n                    className=\"facebook-textarea h-20 text-sm\"\n                    disabled={loading}\n                  />\n                  <div className=\"mt-1 text-xs text-gray-500\">\n                    {commentText.length}/500 caractères\n                  </div>\n                </div>\n                \n                {/* Comment Link - Enhanced for clickable images */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    <Link className=\"w-4 h-4 inline mr-1\" />\n                    🔗 Lien pour images cliquables + commentaire\n                  </label>\n                  <input\n                    type=\"url\"\n                    value={commentLink}\n                    onChange={(e) => setCommentLink(e.target.value)}\n                    placeholder=\"https://votre-site.com/produit - Rend les images cliquables ET sera ajouté en commentaire\"\n                    className=\"facebook-input w-full text-sm\"\n                    disabled={loading}\n                  />\n                  <p className=\"text-xs text-gray-500 mt-1\">\n                    🎯 Ce lien servira à la fois pour rendre l'image cliquable ET sera visible dans le commentaire\n                  </p>\n                </div>\n                \n                {(commentText || commentLink) && (\n                  <div className=\"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\n                    <p className=\"text-sm text-blue-800 font-medium mb-1\">📝 Aperçu du commentaire automatique :</p>\n                    <div className=\"text-sm text-blue-700 bg-white p-2 rounded border\">\n                      {commentText && <div>{commentText}</div>}\n                      {commentLink && (\n                        <div className={commentText ? \"mt-2 pt-2 border-t border-blue-200\" : \"\"}>\n                          🔗 <a href={commentLink} className=\"text-blue-600 underline\" target=\"_blank\" rel=\"noopener noreferrer\">\n                            {commentLink}\n                          </a>\n                        </div>\n                      )}\n                    </div>\n                    <div className=\"text-xs text-blue-600 mt-2 space-y-1\">\n                      <p>✨ Ce commentaire sera automatiquement ajouté après la publication</p>\n                      {commentLink && mediaFiles.length > 0 && (\n                        <p>🎯 <strong>Bonus :</strong> L'image sera également cliquable et redirigera vers ce lien !</p>\n                      )}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Detected Links Preview */}\n          {(detectedLinks.length > 0 || linksLoading) && (\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                <Link className=\"w-4 h-4 inline mr-1\" />\n                Liens détectés\n                {linksLoading && (\n                  <span className=\"ml-2 text-xs text-gray-500\">\n                    (Chargement...)\n                  </span>\n                )}\n              </label>\n              \n              <div className=\"space-y-2\">\n                {linksLoading && detectedLinks.length === 0 && (\n                  <div className=\"border border-gray-200 rounded-lg p-4 bg-gray-50\">\n                    <div className=\"animate-pulse\">\n                      <div className=\"h-3 bg-gray-300 rounded mb-2\"></div>\n                      <div className=\"h-2 bg-gray-300 rounded w-3/4\"></div>\n                    </div>\n                  </div>\n                )}\n                \n                {detectedLinks.map((link, index) => (\n                  <LinkPreview \n                    key={`${link.url}-${index}`}\n                    link={link}\n                    onRemove={removeLink}\n                  />\n                ))}\n              </div>\n              \n              {detectedLinks.length > 0 && (\n                <div className=\"text-xs text-gray-500 mt-1\">\n                  <p className=\"text-green-600 font-medium\">✓ {detectedLinks.length} lien(s) détecté(s) avec prévisualisation</p>\n                  <p>Les images et métadonnées s'afficheront automatiquement sur toutes les plateformes</p>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Schedule Time */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              <Clock className=\"w-4 h-4 inline mr-1\" />\n              Programmer la publication (optionnel)\n            </label>\n            <input\n              type=\"datetime-local\"\n              value={scheduledTime}\n              onChange={(e) => setScheduledTime(e.target.value)}\n              min={getMinDateTime()}\n              className=\"facebook-input w-full max-w-xs\"\n              disabled={loading}\n            />\n            {scheduledTime && (\n              <p className=\"text-xs text-gray-500 mt-1\">\n                Sera publié le {new Date(scheduledTime).toLocaleString('fr-FR')}\n              </p>\n            )}\n          </div>\n\n          {/* Submit Button */}\n          <div className=\"flex justify-between items-center pt-4 border-t\">\n            <div className=\"text-sm text-gray-500\">\n              {crossPostMode || smartCrossPostMode ? (\n                selectedCrossTargets.length > 0 ? (\n                  <span className=\"flex items-center\">\n                    {smartCrossPostMode ? <Sparkles className=\"w-4 h-4 mr-1 text-purple-500\" /> : <Target className=\"w-4 h-4 mr-1\" />}\n                    {selectedCrossTargets.length} plateforme(s) sélectionnée(s)\n                    {smartCrossPostMode && <span className=\"ml-1 text-purple-600\">(Intelligent)</span>}\n                  </span>\n                ) : (\n                  'Sélectionnez des plateformes'\n                )\n              ) : (\n                selectedPlatform ? (\n                  <span className=\"flex items-center\">\n                    {getPlatformIcon(selectedPlatform.platform, selectedPlatform.type)}\n                    <span className=\"ml-1\">{selectedPlatform.name || selectedPlatform.username}</span>\n                  </span>\n                ) : (\n                  'Sélectionnez une plateforme'\n                )\n              )}\n            </div>\n            \n            <button\n              type=\"submit\"\n              disabled={\n                loading || \n                (!content.trim() && mediaFiles.length === 0) || \n                (!crossPostMode && !smartCrossPostMode && !selectedPlatform) ||\n                ((crossPostMode || smartCrossPostMode) && selectedCrossTargets.length === 0)\n              }\n              className=\"facebook-button disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2\"\n            >\n              {loading ? (\n                <>\n                  <div className=\"spinner\" />\n                  <span>Publication...</span>\n                </>\n              ) : (\n                <>\n                  {smartCrossPostMode ? <Sparkles className=\"w-4 h-4\" /> : <Send className=\"w-4 h-4\" />}\n                  <span>\n                    {scheduledTime ? 'Programmer' : \n                     smartCrossPostMode ? `🧠 Publication Intelligente (${selectedCrossTargets.length})` :\n                     crossPostMode ? `Publier sur ${selectedCrossTargets.length} plateformes` :\n                     'Publier'}\n                  </span>\n                </>\n              )}\n            </button>\n          </div>\n        </form>\n      </div>\n\n      {/* Live Preview */}\n      {(content || mediaFiles.length > 0) && (\n        <div className=\"facebook-card p-6\">\n          <h3 className=\"text-lg font-semibold text-gray-800 mb-4 flex items-center\">\n            <Calendar className=\"w-5 h-5 mr-2\" />\n            Aperçu du post\n          </h3>\n          <PostPreview \n            content={content}\n            mediaFiles={mediaFiles}\n            detectedLinks={detectedLinks}\n            pageName={(crossPostMode || smartCrossPostMode) ? \n              (smartCrossPostMode ? 'Publication Intelligente' : 'Multi-plateforme') : \n              (selectedPlatform?.name || selectedPlatform?.username || 'Ma Page')}\n            timestamp=\"À l'instant\"\n            platform={(crossPostMode || smartCrossPostMode) ? 'meta' : selectedPlatform?.platform}\n          />\n          \n          {(crossPostMode || smartCrossPostMode) && selectedCrossTargets.length > 0 && (\n            <div className=\"mt-4 p-3 bg-gray-50 rounded-lg\">\n              <p className=\"text-sm font-medium text-gray-700 mb-2 flex items-center\">\n                {smartCrossPostMode && <Sparkles className=\"w-4 h-4 mr-1 text-purple-600\" />}\n                Publication sur :\n              </p>\n              <div className=\"flex flex-wrap gap-2\">\n                {selectedCrossTargets.map((target) => (\n                  <span\n                    key={target.id}\n                    className=\"inline-flex items-center px-2 py-1 bg-white border border-gray-200 text-xs rounded\"\n                  >\n                    {getPlatformIcon(target.platform, target.type)}\n                    <span className=\"ml-1\">{target.name}</span>\n                  </span>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PostCreator;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}