{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Instagram,Users,CheckCircle,AlertCircle,Loader,ExternalLink,ArrowRight,Zap}from'lucide-react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const InstagramTunnelSetup=_ref=>{let{user,onUserConnected,onTunnelReady}=_ref;const[setupStatus,setSetupStatus]=useState('not_connected');const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[diagnosis,setDiagnosis]=useState(null);const[manualToken,setManualToken]=useState('');const[showTokenInput,setShowTokenInput]=useState(false);const API_BASE=process.env.REACT_APP_BACKEND_URL||'';useEffect(()=>{if(user){checkTunnelStatus();}else{setSetupStatus('not_connected');}},[user]);const checkTunnelStatus=async()=>{try{setLoading(true);// Vérifier le diagnostic Instagram complet\nconst response=await axios.get(\"\".concat(API_BASE,\"/api/debug/instagram-complete-diagnosis\"));const diagnosisData=response.data;setDiagnosis(diagnosisData);if(diagnosisData.instagram_accounts&&diagnosisData.instagram_accounts.length>0){// Vérifier si @logicamp_berger est disponible\nconst logicampAccount=diagnosisData.instagram_accounts.find(account=>account.username==='logicamp_berger');if(logicampAccount){setSetupStatus('ready');if(onTunnelReady)onTunnelReady(true);}else{setSetupStatus('instagram_not_found');}}else{setSetupStatus('no_instagram');}}catch(error){console.error('Erreur diagnostic tunnel:',error);setSetupStatus('error');setError('Erreur lors du diagnostic du tunnel Instagram');}finally{setLoading(false);}};const handleBusinessManagerLogin=()=>{setError('');setLoading(true);// URL de connexion Facebook avec permissions Business Manager étendues\nconst redirectUri=encodeURIComponent(window.location.origin+window.location.pathname);const scope='pages_manage_posts,pages_read_engagement,pages_show_list,business_management,read_insights,instagram_basic,instagram_content_publish';const facebookAuthUrl=\"https://www.facebook.com/v18.0/dialog/oauth?\"+\"client_id=5664227323683118&\"+\"redirect_uri=\".concat(redirectUri,\"&\")+\"scope=\".concat(scope,\"&\")+\"response_type=code&\"+\"state=instagram_tunnel_\".concat(Math.random().toString(36).substring(7));window.location.href=facebookAuthUrl;};const handleManualTokenLogin=async()=>{if(!manualToken.trim()){setError('Veuillez saisir un token d\\'accès Facebook valide');return;}try{setLoading(true);setError('');// Utiliser la fonction onUserConnected pour simuler la connexion\nif(onUserConnected){await onUserConnected(manualToken);}}catch(err){console.error('Error with manual token:',err);setError(\"Erreur lors de la connexion: \".concat(err.message));}finally{setLoading(false);}};const testTunnel=async()=>{try{setLoading(true);setError('');const response=await axios.post(\"\".concat(API_BASE,\"/api/debug/test-instagram-webhook-universal?shop_type=gizmobbs\"));const result=response.data;if(result.success){alert('✅ Tunnel Instagram testé avec succès!\\nVérifiez @logicamp_berger sur Instagram.');setSetupStatus('ready');if(onTunnelReady)onTunnelReady(true);}else{throw new Error(result.error||'Test du tunnel échoué');}}catch(error){console.error('Erreur test tunnel:',error);setError(\"Test \\xE9chou\\xE9: \".concat(error.message));}finally{setLoading(false);}};const renderStatus=()=>{switch(setupStatus){case'not_connected':return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-lg p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(Instagram,{className:\"w-8 h-8 text-white\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-2\",children:\"Tunnel Instagram Gratuit\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Connectez votre Business Manager pour activer la publication automatique sur Instagram\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-4 border-l-4 border-green-500\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 mb-2\",children:\"\\uD83C\\uDFAF Cible : @logicamp_berger\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Vos publications seront automatiquement post\\xE9es sur ce compte Instagram\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-3 gap-4 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded p-3 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2\",children:/*#__PURE__*/_jsx(Zap,{className:\"w-4 h-4 text-blue-600\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:\"Publication automatique\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500\",children:\"Via webhook API\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded p-3 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2\",children:/*#__PURE__*/_jsx(Instagram,{className:\"w-4 h-4 text-purple-600\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:\"M\\xE9dias optimis\\xE9s\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500\",children:\"Images & hashtags\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded p-3 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2\",children:/*#__PURE__*/_jsx(CheckCircle,{className:\"w-4 h-4 text-green-600\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:\"Multi-magasins\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500\",children:\"5 shops support\\xE9s\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleBusinessManagerLogin,disabled:loading,className:\"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center space-x-2 font-medium\",children:loading?/*#__PURE__*/_jsx(Loader,{className:\"w-5 h-5 animate-spin\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Users,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Connecter Business Manager\"}),/*#__PURE__*/_jsx(ArrowRight,{className:\"w-4 h-4\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowTokenInput(!showTokenInput),className:\"w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-200 transition-colors text-sm\",children:\"Ou utiliser un token manuel\"})]})]})]});case'no_instagram':return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 border border-yellow-200 rounded-lg p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 text-yellow-600 mb-4\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"Business Manager connect\\xE9 - Instagram manquant\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-4 mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold mb-3\",children:\"\\uD83D\\uDCF1 \\xC9tapes pour connecter Instagram :\"}),/*#__PURE__*/_jsxs(\"ol\",{className:\"list-decimal list-inside space-y-2 text-sm\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"Allez sur \",/*#__PURE__*/_jsx(\"a\",{href:\"https://business.facebook.com\",className:\"text-blue-600 hover:underline\",target:\"_blank\",rel:\"noopener noreferrer\",children:\"Facebook Business Manager\"})]}),/*#__PURE__*/_jsx(\"li\",{children:\"Section \\\"Comptes\\\" \\u2192 \\\"Instagram\\\"\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Cliquez \\\"Ajouter\\\" et connectez @logicamp_berger\"}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Assurez-vous que c'est un compte \",/*#__PURE__*/_jsx(\"strong\",{children:\"Instagram Business\"})]}),/*#__PURE__*/_jsx(\"li\",{children:\"Reconnectez-vous ici\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:checkTunnelStatus,disabled:loading,className:\"bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 disabled:opacity-50 flex items-center space-x-2\",children:[loading?/*#__PURE__*/_jsx(Loader,{className:\"w-4 h-4 animate-spin\"}):/*#__PURE__*/_jsx(Instagram,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Rev\\xE9rifier Instagram\"})]})]});case'instagram_not_found':return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-orange-50 border border-orange-200 rounded-lg p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 text-orange-600 mb-4\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"@logicamp_berger non trouv\\xE9\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 mb-4\",children:\"Des comptes Instagram sont connect\\xE9s, mais @logicamp_berger n'est pas accessible.\"}),diagnosis&&diagnosis.instagram_accounts&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-4 mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold mb-2\",children:\"Comptes Instagram trouv\\xE9s :\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-1 text-sm\",children:diagnosis.instagram_accounts.map((account,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Instagram,{className:\"w-3 h-3 text-gray-400\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"@\",account.username,\" (\",account.name,\")\"]})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-4 mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold mb-2\",children:\"\\uD83D\\uDCA1 Solutions possibles :\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc list-inside space-y-1 text-sm\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"V\\xE9rifiez que @logicamp_berger est connect\\xE9 \\xE0 une page Facebook\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Assurez-vous d'avoir les permissions sur ce compte\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Connectez-vous avec le bon compte Business Manager\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:checkTunnelStatus,disabled:loading,className:\"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 disabled:opacity-50 flex items-center space-x-2\",children:[loading?/*#__PURE__*/_jsx(Loader,{className:\"w-4 h-4 animate-spin\"}):/*#__PURE__*/_jsx(Instagram,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Rev\\xE9rifier\"})]})]});case'ready':return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 border border-green-200 rounded-lg p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 text-green-600 mb-4\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-lg\",children:\"\\uD83C\\uDF89 Tunnel Instagram Actif !\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-semibold flex items-center space-x-2 mb-2\",children:[/*#__PURE__*/_jsx(Instagram,{className:\"w-4 h-4 text-pink-500\"}),/*#__PURE__*/_jsx(\"span\",{children:\"@logicamp_berger\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-2\",children:\"\\u2705 Connect\\xE9 et pr\\xEAt pour publications\"}),/*#__PURE__*/_jsxs(\"a\",{href:\"https://www.instagram.com/logicamp_berger/\",target:\"_blank\",rel:\"noopener noreferrer\",className:\"inline-flex items-center space-x-1 text-blue-600 hover:underline text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Voir le profil\"}),/*#__PURE__*/_jsx(ExternalLink,{className:\"w-3 h-3\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold mb-2\",children:\"\\uD83D\\uDE80 Endpoint Webhook\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs bg-gray-100 p-2 rounded\",children:[API_BASE,\"/api/webhook\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Stores: gizmobbs, outdoor, logicantiq...\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:testTunnel,disabled:loading,className:\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center space-x-2\",children:[loading?/*#__PURE__*/_jsx(Loader,{className:\"w-4 h-4 animate-spin\"}):/*#__PURE__*/_jsx(Zap,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Tester le Tunnel\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:checkTunnelStatus,disabled:loading,className:\"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 disabled:opacity-50\",children:\"Actualiser\"})]})]});case'error':default:return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 border border-red-200 rounded-lg p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 text-red-600 mb-4\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"Erreur Tunnel Instagram\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 mb-4\",children:\"Impossible de v\\xE9rifier le statut du tunnel Instagram.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:checkTunnelStatus,disabled:loading,className:\"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 disabled:opacity-50\",children:\"R\\xE9essayer\"})]});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto\",children:[error&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 flex items-center space-x-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-4 h-4 flex-shrink-0\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:error})]}),renderStatus(),showTokenInput&&setupStatus==='not_connected'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 bg-gray-50 border rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold mb-3\",children:\"\\uD83D\\uDD11 Connexion avec Token Manuel\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:manualToken,onChange:e=>setManualToken(e.target.value),placeholder:\"Collez votre token Facebook Business Manager ici...\",className:\"w-full p-3 border border-gray-300 rounded-lg text-sm\",rows:\"3\",disabled:loading}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-blue-600 space-y-1\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDCCB \",/*#__PURE__*/_jsx(\"strong\",{children:\"Obtenir un token :\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"1. Allez sur \",/*#__PURE__*/_jsx(\"a\",{href:\"https://developers.facebook.com/tools/explorer/\",target:\"_blank\",rel:\"noopener noreferrer\",className:\"underline\",children:\"Graph API Explorer\"})]}),/*#__PURE__*/_jsx(\"p\",{children:\"2. App: 5664227323683118\"}),/*#__PURE__*/_jsx(\"p\",{children:\"3. Permissions: business_management, pages_manage_posts, instagram_content_publish\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleManualTokenLogin,disabled:loading||!manualToken.trim(),className:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center space-x-2\",children:[loading?/*#__PURE__*/_jsx(Loader,{className:\"w-4 h-4 animate-spin\"}):/*#__PURE__*/_jsx(Users,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Connecter avec Token\"})]})]})]}),setupStatus==='ready'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-blue-900 mb-3\",children:\"\\uD83D\\uDCD6 Guide d'utilisation du Tunnel\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded p-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\uD83C\\uDF10 Via Webhook API\"}),/*#__PURE__*/_jsx(\"pre\",{className:\"text-xs bg-gray-100 p-2 rounded overflow-auto\",children:\"curl -X POST \\\"\".concat(API_BASE,\"/api/webhook\\\" \\\\\\n  -F \\\"image=@image.jpg\\\" \\\\\\n  -F 'json_data={\\\"title\\\":\\\"Mon produit\\\",\\\"description\\\":\\\"Description\\\",\\\"url\\\":\\\"https://site.com\\\",\\\"store\\\":\\\"gizmobbs\\\"}'\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded p-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium mb-2\",children:\"\\uD83D\\uDDA5\\uFE0F Via Interface Web\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Utilisez l'onglet \\\"Cr\\xE9er un Post\\\" pour publier manuellement sur Instagram via l'interface.\"})]})]})]})]});};export default InstagramTunnelSetup;","map":{"version":3,"names":["React","useState","useEffect","Instagram","Users","CheckCircle","AlertCircle","Loader","ExternalLink","ArrowRight","Zap","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","InstagramTunnelSetup","_ref","user","onUserConnected","onTunnelReady","setupStatus","setSetupStatus","loading","setLoading","error","setError","diagnosis","setDiagnosis","manualToken","setManualToken","showTokenInput","setShowTokenInput","API_BASE","process","env","REACT_APP_BACKEND_URL","checkTunnelStatus","response","get","concat","diagnosisData","data","instagram_accounts","length","logicampAccount","find","account","username","console","handleBusinessManagerLogin","redirectUri","encodeURIComponent","window","location","origin","pathname","scope","facebookAuthUrl","Math","random","toString","substring","href","handleManualTokenLogin","trim","err","message","testTunnel","post","result","success","alert","Error","renderStatus","className","children","onClick","disabled","target","rel","map","index","name","value","onChange","e","placeholder","rows"],"sources":["/app/frontend/src/components/InstagramTunnelSetup.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Instagram, Users, CheckCircle, AlertCircle, Loader, ExternalLink, ArrowRight, Zap } from 'lucide-react';\nimport axios from 'axios';\n\nconst InstagramTunnelSetup = ({ user, onUserConnected, onTunnelReady }) => {\n  const [setupStatus, setSetupStatus] = useState('not_connected');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [diagnosis, setDiagnosis] = useState(null);\n  const [manualToken, setManualToken] = useState('');\n  const [showTokenInput, setShowTokenInput] = useState(false);\n\n  const API_BASE = process.env.REACT_APP_BACKEND_URL || '';\n\n  useEffect(() => {\n    if (user) {\n      checkTunnelStatus();\n    } else {\n      setSetupStatus('not_connected');\n    }\n  }, [user]);\n\n  const checkTunnelStatus = async () => {\n    try {\n      setLoading(true);\n      \n      // Vérifier le diagnostic Instagram complet\n      const response = await axios.get(`${API_BASE}/api/debug/instagram-complete-diagnosis`);\n      const diagnosisData = response.data;\n      \n      setDiagnosis(diagnosisData);\n      \n      if (diagnosisData.instagram_accounts && diagnosisData.instagram_accounts.length > 0) {\n        // Vérifier si @logicamp_berger est disponible\n        const logicampAccount = diagnosisData.instagram_accounts.find(\n          account => account.username === 'logicamp_berger'\n        );\n        \n        if (logicampAccount) {\n          setSetupStatus('ready');\n          if (onTunnelReady) onTunnelReady(true);\n        } else {\n          setSetupStatus('instagram_not_found');\n        }\n      } else {\n        setSetupStatus('no_instagram');\n      }\n      \n    } catch (error) {\n      console.error('Erreur diagnostic tunnel:', error);\n      setSetupStatus('error');\n      setError('Erreur lors du diagnostic du tunnel Instagram');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleBusinessManagerLogin = () => {\n    setError('');\n    setLoading(true);\n\n    // URL de connexion Facebook avec permissions Business Manager étendues\n    const redirectUri = encodeURIComponent(window.location.origin + window.location.pathname);\n    const scope = 'pages_manage_posts,pages_read_engagement,pages_show_list,business_management,read_insights,instagram_basic,instagram_content_publish';\n    \n    const facebookAuthUrl = `https://www.facebook.com/v18.0/dialog/oauth?` +\n      `client_id=5664227323683118&` +\n      `redirect_uri=${redirectUri}&` +\n      `scope=${scope}&` +\n      `response_type=code&` +\n      `state=instagram_tunnel_${Math.random().toString(36).substring(7)}`;\n    \n    window.location.href = facebookAuthUrl;\n  };\n\n  const handleManualTokenLogin = async () => {\n    if (!manualToken.trim()) {\n      setError('Veuillez saisir un token d\\'accès Facebook valide');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError('');\n      \n      // Utiliser la fonction onUserConnected pour simuler la connexion\n      if (onUserConnected) {\n        await onUserConnected(manualToken);\n      }\n      \n    } catch (err) {\n      console.error('Error with manual token:', err);\n      setError(`Erreur lors de la connexion: ${err.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const testTunnel = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      \n      const response = await axios.post(`${API_BASE}/api/debug/test-instagram-webhook-universal?shop_type=gizmobbs`);\n      const result = response.data;\n      \n      if (result.success) {\n        alert('✅ Tunnel Instagram testé avec succès!\\nVérifiez @logicamp_berger sur Instagram.');\n        setSetupStatus('ready');\n        if (onTunnelReady) onTunnelReady(true);\n      } else {\n        throw new Error(result.error || 'Test du tunnel échoué');\n      }\n      \n    } catch (error) {\n      console.error('Erreur test tunnel:', error);\n      setError(`Test échoué: ${error.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const renderStatus = () => {\n    switch (setupStatus) {\n      case 'not_connected':\n        return (\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-8\">\n            <div className=\"text-center mb-6\">\n              <div className=\"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <Instagram className=\"w-8 h-8 text-white\" />\n              </div>\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Tunnel Instagram Gratuit</h2>\n              <p className=\"text-gray-600\">Connectez votre Business Manager pour activer la publication automatique sur Instagram</p>\n            </div>\n            \n            <div className=\"space-y-4\">\n              <div className=\"bg-white rounded-lg p-4 border-l-4 border-green-500\">\n                <h3 className=\"font-semibold text-gray-900 mb-2\">🎯 Cible : @logicamp_berger</h3>\n                <p className=\"text-sm text-gray-600\">Vos publications seront automatiquement postées sur ce compte Instagram</p>\n              </div>\n              \n              <div className=\"grid md:grid-cols-3 gap-4 text-sm\">\n                <div className=\"bg-white rounded p-3 text-center\">\n                  <div className=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2\">\n                    <Zap className=\"w-4 h-4 text-blue-600\" />\n                  </div>\n                  <div className=\"font-medium\">Publication automatique</div>\n                  <div className=\"text-gray-500\">Via webhook API</div>\n                </div>\n                <div className=\"bg-white rounded p-3 text-center\">\n                  <div className=\"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2\">\n                    <Instagram className=\"w-4 h-4 text-purple-600\" />\n                  </div>\n                  <div className=\"font-medium\">Médias optimisés</div>\n                  <div className=\"text-gray-500\">Images & hashtags</div>\n                </div>\n                <div className=\"bg-white rounded p-3 text-center\">\n                  <div className=\"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2\">\n                    <CheckCircle className=\"w-4 h-4 text-green-600\" />\n                  </div>\n                  <div className=\"font-medium\">Multi-magasins</div>\n                  <div className=\"text-gray-500\">5 shops supportés</div>\n                </div>\n              </div>\n\n              <div className=\"flex flex-col space-y-3\">\n                <button\n                  onClick={handleBusinessManagerLogin}\n                  disabled={loading}\n                  className=\"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center space-x-2 font-medium\"\n                >\n                  {loading ? (\n                    <Loader className=\"w-5 h-5 animate-spin\" />\n                  ) : (\n                    <>\n                      <Users className=\"w-5 h-5\" />\n                      <span>Connecter Business Manager</span>\n                      <ArrowRight className=\"w-4 h-4\" />\n                    </>\n                  )}\n                </button>\n                \n                <button\n                  onClick={() => setShowTokenInput(!showTokenInput)}\n                  className=\"w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-200 transition-colors text-sm\"\n                >\n                  Ou utiliser un token manuel\n                </button>\n              </div>\n            </div>\n          </div>\n        );\n\n      case 'no_instagram':\n        return (\n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-6\">\n            <div className=\"flex items-center space-x-2 text-yellow-600 mb-4\">\n              <AlertCircle className=\"w-5 h-5\" />\n              <span className=\"font-semibold\">Business Manager connecté - Instagram manquant</span>\n            </div>\n            \n            <div className=\"bg-white rounded-lg p-4 mb-4\">\n              <h4 className=\"font-semibold mb-3\">📱 Étapes pour connecter Instagram :</h4>\n              <ol className=\"list-decimal list-inside space-y-2 text-sm\">\n                <li>Allez sur <a href=\"https://business.facebook.com\" className=\"text-blue-600 hover:underline\" target=\"_blank\" rel=\"noopener noreferrer\">Facebook Business Manager</a></li>\n                <li>Section \"Comptes\" → \"Instagram\"</li>\n                <li>Cliquez \"Ajouter\" et connectez @logicamp_berger</li>\n                <li>Assurez-vous que c'est un compte <strong>Instagram Business</strong></li>\n                <li>Reconnectez-vous ici</li>\n              </ol>\n            </div>\n            \n            <button\n              onClick={checkTunnelStatus}\n              disabled={loading}\n              className=\"bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 disabled:opacity-50 flex items-center space-x-2\"\n            >\n              {loading ? <Loader className=\"w-4 h-4 animate-spin\" /> : <Instagram className=\"w-4 h-4\" />}\n              <span>Revérifier Instagram</span>\n            </button>\n          </div>\n        );\n\n      case 'instagram_not_found':\n        return (\n          <div className=\"bg-orange-50 border border-orange-200 rounded-lg p-6\">\n            <div className=\"flex items-center space-x-2 text-orange-600 mb-4\">\n              <AlertCircle className=\"w-5 h-5\" />\n              <span className=\"font-semibold\">@logicamp_berger non trouvé</span>\n            </div>\n            \n            <p className=\"text-gray-700 mb-4\">\n              Des comptes Instagram sont connectés, mais @logicamp_berger n'est pas accessible.\n            </p>\n            \n            {diagnosis && diagnosis.instagram_accounts && (\n              <div className=\"bg-white rounded-lg p-4 mb-4\">\n                <h4 className=\"font-semibold mb-2\">Comptes Instagram trouvés :</h4>\n                <ul className=\"space-y-1 text-sm\">\n                  {diagnosis.instagram_accounts.map((account, index) => (\n                    <li key={index} className=\"flex items-center space-x-2\">\n                      <Instagram className=\"w-3 h-3 text-gray-400\" />\n                      <span>@{account.username} ({account.name})</span>\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            )}\n            \n            <div className=\"bg-white rounded-lg p-4 mb-4\">\n              <h4 className=\"font-semibold mb-2\">💡 Solutions possibles :</h4>\n              <ul className=\"list-disc list-inside space-y-1 text-sm\">\n                <li>Vérifiez que @logicamp_berger est connecté à une page Facebook</li>\n                <li>Assurez-vous d'avoir les permissions sur ce compte</li>\n                <li>Connectez-vous avec le bon compte Business Manager</li>\n              </ul>\n            </div>\n            \n            <button\n              onClick={checkTunnelStatus}\n              disabled={loading}\n              className=\"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 disabled:opacity-50 flex items-center space-x-2\"\n            >\n              {loading ? <Loader className=\"w-4 h-4 animate-spin\" /> : <Instagram className=\"w-4 h-4\" />}\n              <span>Revérifier</span>\n            </button>\n          </div>\n        );\n\n      case 'ready':\n        return (\n          <div className=\"bg-green-50 border border-green-200 rounded-lg p-6\">\n            <div className=\"flex items-center space-x-2 text-green-600 mb-4\">\n              <CheckCircle className=\"w-5 h-5\" />\n              <span className=\"font-semibold text-lg\">🎉 Tunnel Instagram Actif !</span>\n            </div>\n            \n            <div className=\"grid md:grid-cols-2 gap-4 mb-6\">\n              <div className=\"bg-white rounded-lg p-4\">\n                <h4 className=\"font-semibold flex items-center space-x-2 mb-2\">\n                  <Instagram className=\"w-4 h-4 text-pink-500\" />\n                  <span>@logicamp_berger</span>\n                </h4>\n                <p className=\"text-sm text-gray-600 mb-2\">✅ Connecté et prêt pour publications</p>\n                <a\n                  href=\"https://www.instagram.com/logicamp_berger/\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"inline-flex items-center space-x-1 text-blue-600 hover:underline text-sm\"\n                >\n                  <span>Voir le profil</span>\n                  <ExternalLink className=\"w-3 h-3\" />\n                </a>\n              </div>\n              \n              <div className=\"bg-white rounded-lg p-4\">\n                <h4 className=\"font-semibold mb-2\">🚀 Endpoint Webhook</h4>\n                <p className=\"text-xs bg-gray-100 p-2 rounded\">\n                  {API_BASE}/api/webhook\n                </p>\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  Stores: gizmobbs, outdoor, logicantiq...\n                </p>\n              </div>\n            </div>\n            \n            <div className=\"flex space-x-3\">\n              <button\n                onClick={testTunnel}\n                disabled={loading}\n                className=\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center space-x-2\"\n              >\n                {loading ? <Loader className=\"w-4 h-4 animate-spin\" /> : <Zap className=\"w-4 h-4\" />}\n                <span>Tester le Tunnel</span>\n              </button>\n              \n              <button\n                onClick={checkTunnelStatus}\n                disabled={loading}\n                className=\"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 disabled:opacity-50\"\n              >\n                Actualiser\n              </button>\n            </div>\n          </div>\n        );\n\n      case 'error':\n      default:\n        return (\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-6\">\n            <div className=\"flex items-center space-x-2 text-red-600 mb-4\">\n              <AlertCircle className=\"w-5 h-5\" />\n              <span className=\"font-semibold\">Erreur Tunnel Instagram</span>\n            </div>\n            <p className=\"text-gray-700 mb-4\">\n              Impossible de vérifier le statut du tunnel Instagram.\n            </p>\n            <button\n              onClick={checkTunnelStatus}\n              disabled={loading}\n              className=\"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 disabled:opacity-50\"\n            >\n              Réessayer\n            </button>\n          </div>\n        );\n    }\n  };\n\n  return (\n    <div className=\"max-w-4xl mx-auto\">      \n      {error && (\n        <div className=\"mb-4 flex items-center space-x-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700\">\n          <AlertCircle className=\"w-4 h-4 flex-shrink-0\" />\n          <span className=\"text-sm\">{error}</span>\n        </div>\n      )}\n\n      {renderStatus()}\n\n      {/* Token manuel */}\n      {showTokenInput && setupStatus === 'not_connected' && (\n        <div className=\"mt-4 bg-gray-50 border rounded-lg p-4\">\n          <h4 className=\"font-semibold mb-3\">🔑 Connexion avec Token Manuel</h4>\n          <div className=\"space-y-3\">\n            <textarea\n              value={manualToken}\n              onChange={(e) => setManualToken(e.target.value)}\n              placeholder=\"Collez votre token Facebook Business Manager ici...\"\n              className=\"w-full p-3 border border-gray-300 rounded-lg text-sm\"\n              rows=\"3\"\n              disabled={loading}\n            />\n            <div className=\"text-xs text-blue-600 space-y-1\">\n              <p>📋 <strong>Obtenir un token :</strong></p>\n              <p>1. Allez sur <a href=\"https://developers.facebook.com/tools/explorer/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"underline\">Graph API Explorer</a></p>\n              <p>2. App: 5664227323683118</p>\n              <p>3. Permissions: business_management, pages_manage_posts, instagram_content_publish</p>\n            </div>\n            <button\n              onClick={handleManualTokenLogin}\n              disabled={loading || !manualToken.trim()}\n              className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center space-x-2\"\n            >\n              {loading ? <Loader className=\"w-4 h-4 animate-spin\" /> : <Users className=\"w-4 h-4\" />}\n              <span>Connecter avec Token</span>\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Guide d'utilisation */}\n      {setupStatus === 'ready' && (\n        <div className=\"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-6\">\n          <h3 className=\"font-semibold text-blue-900 mb-3\">📖 Guide d'utilisation du Tunnel</h3>\n          <div className=\"grid md:grid-cols-2 gap-4\">\n            <div className=\"bg-white rounded p-4\">\n              <h4 className=\"font-medium mb-2\">🌐 Via Webhook API</h4>\n              <pre className=\"text-xs bg-gray-100 p-2 rounded overflow-auto\">\n{`curl -X POST \"${API_BASE}/api/webhook\" \\\\\n  -F \"image=@image.jpg\" \\\\\n  -F 'json_data={\"title\":\"Mon produit\",\"description\":\"Description\",\"url\":\"https://site.com\",\"store\":\"gizmobbs\"}'`}\n              </pre>\n            </div>\n            \n            <div className=\"bg-white rounded p-4\">\n              <h4 className=\"font-medium mb-2\">🖥️ Via Interface Web</h4>\n              <p className=\"text-sm text-gray-600\">\n                Utilisez l'onglet \"Créer un Post\" pour publier manuellement sur Instagram via l'interface.\n              </p>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default InstagramTunnelSetup;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}