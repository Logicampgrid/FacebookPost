{"ast":null,"code":"import _objectSpread from\"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{Users,Calendar,Send,Building2,Instagram,MessageSquare,Package}from'lucide-react';import PostCreator from'./components/PostCreator';import PostList from'./components/PostList';import FacebookLogin from'./components/FacebookLogin';import PlatformSelector from'./components/PlatformSelector';import BusinessManagerSelector from'./components/BusinessManagerSelector';import WebhookHistory from'./components/WebhookHistory';import ConnectionDiagnostic from'./components/ConnectionDiagnostic';import FacebookConnectionTest from'./components/FacebookConnectionTest';import InstagramDiagnostics from'./components/InstagramDiagnostics';import InstagramSetupGuide from'./components/InstagramSetupGuide';import ImageOrientationTest from'./components/ImageOrientationTest';import LogicampBergerSetup from'./components/LogicampBergerSetup';import LogicampBergerConnector from'./components/LogicampBergerConnector';import InstagramTunnelSetup from'./components/InstagramTunnelSetup';import TunnelStatusWidget from'./components/TunnelStatusWidget';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE=process.env.REACT_APP_BACKEND_URL||'';function App(){var _user$business_manage2,_user$business_manage3;const[user,setUser]=useState(null);const[posts,setPosts]=useState([]);const[selectedPlatform,setSelectedPlatform]=useState(null);const[selectedBusinessManager,setSelectedBusinessManager]=useState(null);const[allPlatforms,setAllPlatforms]=useState({business_pages:[],business_groups:[],business_instagram:[],personal_pages:[],personal_groups:[]});const[loading,setLoading]=useState(false);const[activeTab,setActiveTab]=useState('setup');const[fbInitialized,setFbInitialized]=useState(false);// Initialize Facebook SDK with better error handling\nuseEffect(()=>{const initFacebookSDK=()=>{// Check if FB SDK is already loaded\nif(window.FB){initFB();return;}// Wait for FB SDK to load\nwindow.fbAsyncInit=function(){try{window.FB.init({appId:'5664227323683118',cookie:true,xfbml:true,version:'v18.0'});// Check login status\nwindow.FB.getLoginStatus(response=>{console.log('FB Login Status:',response.status);setFbInitialized(true);});}catch(error){console.error('Facebook SDK initialization error:',error);setFbInitialized(true);// Still allow the app to function\n}};// Fallback if FB SDK doesn't load\nsetTimeout(()=>{if(!window.FB&&!fbInitialized){console.warn('Facebook SDK failed to load, using redirect method only');setFbInitialized(true);}},5000);};const initFB=()=>{try{window.FB.init({appId:'5664227323683118',cookie:true,xfbml:true,version:'v18.0'});setFbInitialized(true);}catch(error){console.error('Facebook SDK init error:',error);setFbInitialized(true);}};initFacebookSDK();},[fbInitialized]);// Load posts when user is authenticated\nuseEffect(()=>{if(user){loadPosts();loadUserPlatforms();}},[user]);// Update platforms when business manager selection changes\nuseEffect(()=>{if(user&&selectedBusinessManager){var _user$business_manage;const businessManagerData=(_user$business_manage=user.business_managers)===null||_user$business_manage===void 0?void 0:_user$business_manage.find(bm=>bm.id===selectedBusinessManager.id);if(businessManagerData){setAllPlatforms(prev=>_objectSpread(_objectSpread({},prev),{},{business_pages:businessManagerData.pages||[],business_groups:businessManagerData.groups||[],business_instagram:businessManagerData.instagram_accounts||[]}));// Clear selected platform if it's not from the current business manager\nif(selectedPlatform&&selectedPlatform._sourceType==='business'){var _businessManagerData$,_businessManagerData$2,_businessManagerData$3;const platformExists=((_businessManagerData$=businessManagerData.pages)===null||_businessManagerData$===void 0?void 0:_businessManagerData$.some(p=>p.id===selectedPlatform.id))||((_businessManagerData$2=businessManagerData.groups)===null||_businessManagerData$2===void 0?void 0:_businessManagerData$2.some(g=>g.id===selectedPlatform.id))||((_businessManagerData$3=businessManagerData.instagram_accounts)===null||_businessManagerData$3===void 0?void 0:_businessManagerData$3.some(ig=>ig.id===selectedPlatform.id));if(!platformExists){setSelectedPlatform(null);}}}}else{setAllPlatforms(prev=>_objectSpread(_objectSpread({},prev),{},{business_pages:[],business_groups:[],business_instagram:[]}));// Clear business platform selection\nif(selectedPlatform&&selectedPlatform._sourceType==='business'){setSelectedPlatform(null);}}},[selectedBusinessManager,user]);const loadPosts=async()=>{try{setLoading(true);const response=await axios.get(\"\".concat(API_BASE,\"/api/posts?user_id=\").concat(user._id));setPosts(response.data.posts);}catch(error){console.error('Error loading posts:',error);}finally{setLoading(false);}};const loadUserPlatforms=async()=>{try{const response=await axios.get(\"\".concat(API_BASE,\"/api/users/\").concat(user._id,\"/platforms\"));setAllPlatforms({personal_pages:response.data.personal_pages||[],personal_groups:response.data.personal_groups||[],business_pages:response.data.business_pages||[],business_groups:response.data.business_groups||[],business_instagram:response.data.business_instagram||[]});// Set selected business manager if available\nif(response.data.selected_business_manager){setSelectedBusinessManager(response.data.selected_business_manager);}}catch(error){console.error('Error loading platforms:',error);}};const handleFacebookLogin=async accessToken=>{try{setLoading(true);console.log('Authenticating with Meta platforms...',accessToken.substring(0,20)+'...');const response=await axios.post(\"\".concat(API_BASE,\"/api/auth/facebook\"),{access_token:accessToken});console.log('Meta auth successful:',response.data);setUser(response.data.user);// Check for business managers\nif(response.data.user.business_managers&&response.data.user.business_managers.length>0){console.log(\"Found \".concat(response.data.user.business_managers.length,\" Business Managers\"));console.log(\"Found \".concat(response.data.total_instagram_accounts,\" Instagram accounts\"));// Find \"Entreprise de Didier Preud'homme\" and auto-select it\nconst didierBM=response.data.user.business_managers.find(bm=>bm.name.toLowerCase().includes(\"didier\")||bm.name.toLowerCase().includes(\"preud'homme\"));if(didierBM){setSelectedBusinessManager(didierBM);console.log('Auto-selected Business Manager:',didierBM.name);}}// Set default platform if available\nif(response.data.user.facebook_pages&&response.data.user.facebook_pages.length>0){console.log('Personal pages found:',response.data.user.facebook_pages.length);}}catch(error){var _error$response,_error$response2,_error$response2$data,_error$response3,_error$response4;console.error('Meta auth error:',error);console.error('Error details:',(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data);let errorMessage='Erreur lors de l\\'authentification Meta';if((_error$response2=error.response)!==null&&_error$response2!==void 0&&(_error$response2$data=_error$response2.data)!==null&&_error$response2$data!==void 0&&_error$response2$data.detail){errorMessage=error.response.data.detail;}else if(((_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.status)===400){errorMessage='Token Facebook invalide ou expirÃ©';}else if(((_error$response4=error.response)===null||_error$response4===void 0?void 0:_error$response4.status)>=500){errorMessage='Erreur serveur. Veuillez rÃ©essayer.';}else if(error.code==='NETWORK_ERROR'||!error.response){errorMessage='Impossible de se connecter au serveur. VÃ©rifiez votre connexion.';}alert(errorMessage);}finally{setLoading(false);}};const handleBusinessManagerSelect=businessManager=>{setSelectedBusinessManager(businessManager);setSelectedPlatform(null);// Reset platform selection\nif(businessManager&&user.business_managers){const bm=user.business_managers.find(b=>b.id===businessManager.id);if(bm){// Auto-select first available platform (priority: pages > groups > instagram)\nif(bm.pages&&bm.pages.length>0){const firstPage=bm.pages[0];firstPage._sourceType='business';firstPage.platform='facebook';firstPage.type='page';setSelectedPlatform(firstPage);}else if(bm.groups&&bm.groups.length>0){const firstGroup=bm.groups[0];firstGroup._sourceType='business';firstGroup.platform='facebook';firstGroup.type='group';setSelectedPlatform(firstGroup);}else if(bm.instagram_accounts&&bm.instagram_accounts.length>0){const firstIG=bm.instagram_accounts[0];firstIG._sourceType='business';firstIG.platform='instagram';firstIG.type='instagram';setSelectedPlatform(firstIG);}}}};const handlePostCreated=newPost=>{setPosts(prev=>[newPost,...prev]);};const handlePostDeleted=async postId=>{try{await axios.delete(\"\".concat(API_BASE,\"/api/posts/\").concat(postId));setPosts(prev=>prev.filter(post=>post.id!==postId));}catch(error){console.error('Error deleting post:',error);alert('Erreur lors de la suppression du post');}};const handlePostPublished=async postId=>{try{setLoading(true);await axios.post(\"\".concat(API_BASE,\"/api/posts/\").concat(postId,\"/publish\"));await loadPosts();// Reload to get updated status\nalert('Post republiÃ© avec succÃ¨s !');}catch(error){var _error$response5,_error$response5$data;console.error('Error republishing post:',error);alert('Erreur lors de la republication: '+(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.detail)||'Erreur inconnue'));}finally{setLoading(false);}};const getPlatformIcon=(platform,type)=>{if(platform==='instagram')return/*#__PURE__*/_jsx(Instagram,{className:\"w-4 h-4\"});if(type==='group')return/*#__PURE__*/_jsx(MessageSquare,{className:\"w-4 h-4\"});return/*#__PURE__*/_jsx(Users,{className:\"w-4 h-4\"});// Default for pages\n};const getPlatformStats=()=>{const totalPages=allPlatforms.personal_pages.length+allPlatforms.business_pages.length;const totalGroups=allPlatforms.personal_groups.length+allPlatforms.business_groups.length;const totalInstagram=allPlatforms.business_instagram.length;const totalPlatforms=totalPages+totalGroups+totalInstagram;return{totalPages,totalGroups,totalInstagram,totalPlatforms};};// Show loading while Facebook SDK initializes\nif(!fbInitialized){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-facebook flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"facebook-card p-8 max-w-md w-full mx-4 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Chargement du SDK Meta...\"})]})});}if(!user){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-facebook\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-20 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(Instagram,{className:\"w-10 h-10 text-white\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold text-gray-800 mb-2\",children:\"Tunnel Instagram Gratuit\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-lg\",children:\"Publication automatique sur Instagram @logicamp_berger\"})]}),/*#__PURE__*/_jsx(InstagramTunnelSetup,{user:user,onUserConnected:handleFacebookLogin,onTunnelReady:ready=>{if(ready){console.log('Tunnel Instagram prÃªt !');}}}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-12 max-w-md mx-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"facebook-card p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800 mb-4 text-center\",children:\"Ou connexion classique\"}),/*#__PURE__*/_jsx(FacebookLogin,{onLogin:handleFacebookLogin,loading:loading}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 text-center text-sm text-gray-500\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u2728 Acc\\xE8s complet aux plateformes Meta Business\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center space-x-4 mt-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-3 h-3\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Pages\"})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(MessageSquare,{className:\"w-3 h-3\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Groupes\"})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(Instagram,{className:\"w-3 h-3\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Instagram\"})]})]})]})]})})]})});}const stats=getPlatformStats();return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-facebook\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"facebook-card mb-6 sticky top-0 z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-6xl mx-auto px-4 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(Building2,{className:\"w-6 h-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold text-gray-800\",children:\"Meta Publishing Platform\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"Bienvenue, \",user.name]}),selectedBusinessManager&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-blue-600\",children:[\"\\uD83D\\uDCCA \",selectedBusinessManager.name]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"hidden md:flex items-center space-x-4 text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-3 h-3\"}),/*#__PURE__*/_jsx(\"span\",{children:stats.totalPages})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(MessageSquare,{className:\"w-3 h-3\"}),/*#__PURE__*/_jsx(\"span\",{children:stats.totalGroups})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(Instagram,{className:\"w-3 h-3\"}),/*#__PURE__*/_jsx(\"span\",{children:stats.totalInstagram})]})]}),/*#__PURE__*/_jsx(PlatformSelector,{allPlatforms:allPlatforms,selectedPlatform:selectedPlatform,selectedBusinessManager:selectedBusinessManager,onPlatformSelect:setSelectedPlatform}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setUser(null);setPosts([]);setSelectedPlatform(null);setSelectedBusinessManager(null);setAllPlatforms({business_pages:[],business_groups:[],business_instagram:[],personal_pages:[],personal_groups:[]});},className:\"text-gray-600 hover:text-gray-800 transition-colors\",children:\"D\\xE9connexion\"})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto px-4\",children:[(!selectedBusinessManager||activeTab==='setup')&&/*#__PURE__*/_jsx(BusinessManagerSelector,{user:user,onBusinessManagerSelect:handleBusinessManagerSelect}),/*#__PURE__*/_jsx(\"div\",{className:\"facebook-card mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex border-b\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('setup'),className:\"px-6 py-3 font-medium transition-colors \".concat(activeTab==='setup'?'text-facebook-primary border-b-2 border-facebook-primary':'text-gray-600 hover:text-facebook-primary'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Building2,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Configuration\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('create'),disabled:!selectedBusinessManager,className:\"px-6 py-3 font-medium transition-colors \".concat(activeTab==='create'?'text-facebook-primary border-b-2 border-facebook-primary':selectedBusinessManager?'text-gray-600 hover:text-facebook-primary':'text-gray-400 cursor-not-allowed'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Send,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Cr\\xE9er un Post\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('posts'),disabled:!selectedBusinessManager,className:\"px-6 py-3 font-medium transition-colors \".concat(activeTab==='posts'?'text-facebook-primary border-b-2 border-facebook-primary':selectedBusinessManager?'text-gray-600 hover:text-facebook-primary':'text-gray-400 cursor-not-allowed'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Mes Posts (\",posts.length,\")\"]})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('webhook'),disabled:!selectedBusinessManager,className:\"px-6 py-3 font-medium transition-colors \".concat(activeTab==='webhook'?'text-facebook-primary border-b-2 border-facebook-primary':selectedBusinessManager?'text-gray-600 hover:text-facebook-primary':'text-gray-400 cursor-not-allowed'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Package,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Historique Webhook\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('tunnel'),className:\"px-6 py-3 font-medium transition-colors \".concat(activeTab==='tunnel'?'text-facebook-primary border-b-2 border-facebook-primary':'text-gray-600 hover:text-facebook-primary'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Instagram,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Tunnel Instagram\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('guide'),className:\"px-6 py-3 font-medium transition-colors \".concat(activeTab==='guide'?'text-facebook-primary border-b-2 border-facebook-primary':'text-gray-600 hover:text-facebook-primary'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Instagram,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Guide Instagram\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('logicamp'),className:\"px-6 py-3 font-medium transition-colors \".concat(activeTab==='logicamp'?'text-facebook-primary border-b-2 border-facebook-primary':'text-gray-600 hover:text-facebook-primary'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Instagram,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"@logicamp_berger\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('multi-platform'),className:\"px-6 py-3 font-medium transition-colors \".concat(activeTab==='multi-platform'?'text-facebook-primary border-b-2 border-facebook-primary':'text-gray-600 hover:text-facebook-primary'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-gradient-to-r from-blue-500 to-pink-500 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(Instagram,{className:\"w-2 h-2 text-white\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"Connexion Multi-Plateformes\"})]})})]})}),activeTab==='setup'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"facebook-card p-6\",children:/*#__PURE__*/_jsx(TunnelStatusWidget,{user:user})}),/*#__PURE__*/_jsx(\"div\",{className:\"facebook-card p-6\",children:/*#__PURE__*/_jsx(ConnectionDiagnostic,{API_BASE:API_BASE})}),/*#__PURE__*/_jsx(\"div\",{className:\"facebook-card p-6\",children:/*#__PURE__*/_jsx(FacebookConnectionTest,{API_BASE:API_BASE})}),/*#__PURE__*/_jsx(\"div\",{className:\"facebook-card p-6\",children:/*#__PURE__*/_jsx(InstagramDiagnostics,{API_BASE:API_BASE})}),/*#__PURE__*/_jsx(\"div\",{className:\"facebook-card p-6\",children:/*#__PURE__*/_jsx(ImageOrientationTest,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"facebook-card p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800 mb-4\",children:\"Statut de la configuration Meta\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 rounded-full \".concat(user?'bg-green-500':'bg-red-500')}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Connexion Meta : \",user?'âœ… ConnectÃ©':'âŒ Non connectÃ©']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 rounded-full \".concat((user===null||user===void 0?void 0:(_user$business_manage2=user.business_managers)===null||_user$business_manage2===void 0?void 0:_user$business_manage2.length)>0?'bg-green-500':'bg-yellow-500')}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Business Managers : \",(user===null||user===void 0?void 0:(_user$business_manage3=user.business_managers)===null||_user$business_manage3===void 0?void 0:_user$business_manage3.length)||0,\" trouv\\xE9(s)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 rounded-full \".concat(selectedBusinessManager?'bg-green-500':'bg-gray-400')}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Business Manager s\\xE9lectionn\\xE9 : \",selectedBusinessManager?selectedBusinessManager.name:'Aucun']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-blue-50 border border-blue-200 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-2\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-5 h-5 text-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-blue-800\",children:\"Pages Facebook\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-blue-600\",children:stats.totalPages}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-blue-600\",children:[allPlatforms.personal_pages.length,\" personnelles + \",allPlatforms.business_pages.length,\" business\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-purple-50 border border-purple-200 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-2\",children:[/*#__PURE__*/_jsx(MessageSquare,{className:\"w-5 h-5 text-purple-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-purple-800\",children:\"Groupes Facebook\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-purple-600\",children:stats.totalGroups}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-purple-600\",children:[allPlatforms.personal_groups.length,\" personnels + \",allPlatforms.business_groups.length,\" business\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-pink-50 border border-pink-200 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mb-2\",children:[/*#__PURE__*/_jsx(Instagram,{className:\"w-5 h-5 text-pink-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-pink-800\",children:\"Instagram Business\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-pink-600\",children:stats.totalInstagram}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-pink-600\",children:\"Comptes connect\\xE9s\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mt-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 rounded-full \".concat(selectedPlatform?'bg-green-500':'bg-gray-400')}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Plateforme s\\xE9lectionn\\xE9e : \",selectedPlatform?\"\".concat(selectedPlatform.name,\" (\").concat(selectedPlatform.platform,\")\"):'Aucune']})]})]}),selectedBusinessManager&&selectedPlatform&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-green-800 font-medium\",children:\"\\uD83C\\uDF89 Configuration termin\\xE9e !\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-green-700 text-sm mt-1\",children:[\"Vous pouvez maintenant cr\\xE9er et publier des posts sur \",/*#__PURE__*/_jsx(\"strong\",{children:selectedPlatform.name}),selectedPlatform.platform==='instagram'&&' (Instagram)',selectedPlatform.type==='group'&&' (Groupe)',selectedPlatform.type==='page'&&' (Page)']})]}),stats.totalPlatforms===0&&selectedBusinessManager&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-yellow-800 font-medium\",children:\"\\u26A0\\uFE0F Aucune plateforme trouv\\xE9e\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-yellow-700 text-sm mt-1\",children:\"V\\xE9rifiez les permissions et l'acc\\xE8s aux pages/groupes/Instagram dans votre Business Manager.\"})]})]})]}),activeTab==='create'&&selectedBusinessManager&&/*#__PURE__*/_jsx(PostCreator,{user:user,selectedPlatform:selectedPlatform,selectedBusinessManager:selectedBusinessManager,allPlatforms:allPlatforms,onPostCreated:handlePostCreated}),activeTab==='posts'&&selectedBusinessManager&&/*#__PURE__*/_jsx(PostList,{posts:posts,loading:loading,onDelete:handlePostDeleted,onPublish:handlePostPublished,onRefresh:loadPosts}),activeTab==='webhook'&&selectedBusinessManager&&/*#__PURE__*/_jsx(WebhookHistory,{}),activeTab==='tunnel'&&/*#__PURE__*/_jsx(InstagramTunnelSetup,{user:user,onUserConnected:handleFacebookLogin,onTunnelReady:ready=>{if(ready){console.log('Tunnel Instagram activÃ© !');}}}),activeTab==='guide'&&/*#__PURE__*/_jsx(InstagramSetupGuide,{}),activeTab==='logicamp'&&/*#__PURE__*/_jsx(LogicampBergerSetup,{user:user}),activeTab==='multi-platform'&&/*#__PURE__*/_jsx(LogicampBergerConnector,{user:user,onConnectionComplete:platforms=>{console.log('Connexion multi-plateformes Ã©tablie:',platforms);// Optionnellement recharger les donnÃ©es utilisateur ou mettre Ã  jour l'Ã©tat\nloadUserPlatforms();}})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","axios","Users","Calendar","Send","Building2","Instagram","MessageSquare","Package","PostCreator","PostList","FacebookLogin","PlatformSelector","BusinessManagerSelector","WebhookHistory","ConnectionDiagnostic","FacebookConnectionTest","InstagramDiagnostics","InstagramSetupGuide","ImageOrientationTest","LogicampBergerSetup","LogicampBergerConnector","InstagramTunnelSetup","TunnelStatusWidget","jsx","_jsx","jsxs","_jsxs","API_BASE","process","env","REACT_APP_BACKEND_URL","App","_user$business_manage2","_user$business_manage3","user","setUser","posts","setPosts","selectedPlatform","setSelectedPlatform","selectedBusinessManager","setSelectedBusinessManager","allPlatforms","setAllPlatforms","business_pages","business_groups","business_instagram","personal_pages","personal_groups","loading","setLoading","activeTab","setActiveTab","fbInitialized","setFbInitialized","initFacebookSDK","window","FB","initFB","fbAsyncInit","init","appId","cookie","xfbml","version","getLoginStatus","response","console","log","status","error","setTimeout","warn","loadPosts","loadUserPlatforms","_user$business_manage","businessManagerData","business_managers","find","bm","id","prev","_objectSpread","pages","groups","instagram_accounts","_sourceType","_businessManagerData$","_businessManagerData$2","_businessManagerData$3","platformExists","some","p","g","ig","get","concat","_id","data","selected_business_manager","handleFacebookLogin","accessToken","substring","post","access_token","length","total_instagram_accounts","didierBM","name","toLowerCase","includes","facebook_pages","_error$response","_error$response2","_error$response2$data","_error$response3","_error$response4","errorMessage","detail","code","alert","handleBusinessManagerSelect","businessManager","b","firstPage","platform","type","firstGroup","firstIG","handlePostCreated","newPost","handlePostDeleted","postId","delete","filter","handlePostPublished","_error$response5","_error$response5$data","getPlatformIcon","className","getPlatformStats","totalPages","totalGroups","totalInstagram","totalPlatforms","children","onUserConnected","onTunnelReady","ready","onLogin","stats","onPlatformSelect","onClick","onBusinessManagerSelect","disabled","onPostCreated","onDelete","onPublish","onRefresh","onConnectionComplete","platforms"],"sources":["/app/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Users, Calendar, Send, Building2, Instagram, MessageSquare, Package } from 'lucide-react';\nimport PostCreator from './components/PostCreator';\nimport PostList from './components/PostList';\nimport FacebookLogin from './components/FacebookLogin';\nimport PlatformSelector from './components/PlatformSelector';\nimport BusinessManagerSelector from './components/BusinessManagerSelector';\nimport WebhookHistory from './components/WebhookHistory';\nimport ConnectionDiagnostic from './components/ConnectionDiagnostic';\nimport FacebookConnectionTest from './components/FacebookConnectionTest';\nimport InstagramDiagnostics from './components/InstagramDiagnostics';\nimport InstagramSetupGuide from './components/InstagramSetupGuide';\nimport ImageOrientationTest from './components/ImageOrientationTest';\nimport LogicampBergerSetup from './components/LogicampBergerSetup';\nimport LogicampBergerConnector from './components/LogicampBergerConnector';\nimport InstagramTunnelSetup from './components/InstagramTunnelSetup';\nimport TunnelStatusWidget from './components/TunnelStatusWidget';\n\nconst API_BASE = process.env.REACT_APP_BACKEND_URL || '';\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [posts, setPosts] = useState([]);\n  const [selectedPlatform, setSelectedPlatform] = useState(null);\n  const [selectedBusinessManager, setSelectedBusinessManager] = useState(null);\n  const [allPlatforms, setAllPlatforms] = useState({\n    business_pages: [],\n    business_groups: [],\n    business_instagram: [],\n    personal_pages: [],\n    personal_groups: []\n  });\n  const [loading, setLoading] = useState(false);\n  const [activeTab, setActiveTab] = useState('setup');\n  const [fbInitialized, setFbInitialized] = useState(false);\n\n  // Initialize Facebook SDK with better error handling\n  useEffect(() => {\n    const initFacebookSDK = () => {\n      // Check if FB SDK is already loaded\n      if (window.FB) {\n        initFB();\n        return;\n      }\n\n      // Wait for FB SDK to load\n      window.fbAsyncInit = function() {\n        try {\n          window.FB.init({\n            appId: '5664227323683118',\n            cookie: true,\n            xfbml: true,\n            version: 'v18.0'\n          });\n          \n          // Check login status\n          window.FB.getLoginStatus((response) => {\n            console.log('FB Login Status:', response.status);\n            setFbInitialized(true);\n          });\n          \n        } catch (error) {\n          console.error('Facebook SDK initialization error:', error);\n          setFbInitialized(true); // Still allow the app to function\n        }\n      };\n\n      // Fallback if FB SDK doesn't load\n      setTimeout(() => {\n        if (!window.FB && !fbInitialized) {\n          console.warn('Facebook SDK failed to load, using redirect method only');\n          setFbInitialized(true);\n        }\n      }, 5000);\n    };\n\n    const initFB = () => {\n      try {\n        window.FB.init({\n          appId: '5664227323683118',\n          cookie: true,\n          xfbml: true,\n          version: 'v18.0'\n        });\n        setFbInitialized(true);\n      } catch (error) {\n        console.error('Facebook SDK init error:', error);\n        setFbInitialized(true);\n      }\n    };\n\n    initFacebookSDK();\n  }, [fbInitialized]);\n\n  // Load posts when user is authenticated\n  useEffect(() => {\n    if (user) {\n      loadPosts();\n      loadUserPlatforms();\n    }\n  }, [user]);\n\n  // Update platforms when business manager selection changes\n  useEffect(() => {\n    if (user && selectedBusinessManager) {\n      const businessManagerData = user.business_managers?.find(bm => bm.id === selectedBusinessManager.id);\n      if (businessManagerData) {\n        setAllPlatforms(prev => ({\n          ...prev,\n          business_pages: businessManagerData.pages || [],\n          business_groups: businessManagerData.groups || [],\n          business_instagram: businessManagerData.instagram_accounts || []\n        }));\n        \n        // Clear selected platform if it's not from the current business manager\n        if (selectedPlatform && selectedPlatform._sourceType === 'business') {\n          const platformExists = \n            (businessManagerData.pages?.some(p => p.id === selectedPlatform.id)) ||\n            (businessManagerData.groups?.some(g => g.id === selectedPlatform.id)) ||\n            (businessManagerData.instagram_accounts?.some(ig => ig.id === selectedPlatform.id));\n          \n          if (!platformExists) {\n            setSelectedPlatform(null);\n          }\n        }\n      }\n    } else {\n      setAllPlatforms(prev => ({\n        ...prev,\n        business_pages: [],\n        business_groups: [],\n        business_instagram: []\n      }));\n      \n      // Clear business platform selection\n      if (selectedPlatform && selectedPlatform._sourceType === 'business') {\n        setSelectedPlatform(null);\n      }\n    }\n  }, [selectedBusinessManager, user]);\n\n  const loadPosts = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get(`${API_BASE}/api/posts?user_id=${user._id}`);\n      setPosts(response.data.posts);\n    } catch (error) {\n      console.error('Error loading posts:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadUserPlatforms = async () => {\n    try {\n      const response = await axios.get(`${API_BASE}/api/users/${user._id}/platforms`);\n      setAllPlatforms({\n        personal_pages: response.data.personal_pages || [],\n        personal_groups: response.data.personal_groups || [],\n        business_pages: response.data.business_pages || [],\n        business_groups: response.data.business_groups || [],\n        business_instagram: response.data.business_instagram || []\n      });\n      \n      // Set selected business manager if available\n      if (response.data.selected_business_manager) {\n        setSelectedBusinessManager(response.data.selected_business_manager);\n      }\n    } catch (error) {\n      console.error('Error loading platforms:', error);\n    }\n  };\n\n  const handleFacebookLogin = async (accessToken) => {\n    try {\n      setLoading(true);\n      console.log('Authenticating with Meta platforms...', accessToken.substring(0, 20) + '...');\n      \n      const response = await axios.post(`${API_BASE}/api/auth/facebook`, {\n        access_token: accessToken\n      });\n      \n      console.log('Meta auth successful:', response.data);\n      setUser(response.data.user);\n      \n      // Check for business managers\n      if (response.data.user.business_managers && response.data.user.business_managers.length > 0) {\n        console.log(`Found ${response.data.user.business_managers.length} Business Managers`);\n        console.log(`Found ${response.data.total_instagram_accounts} Instagram accounts`);\n        \n        // Find \"Entreprise de Didier Preud'homme\" and auto-select it\n        const didierBM = response.data.user.business_managers.find(bm => \n          bm.name.toLowerCase().includes(\"didier\") || \n          bm.name.toLowerCase().includes(\"preud'homme\")\n        );\n        if (didierBM) {\n          setSelectedBusinessManager(didierBM);\n          console.log('Auto-selected Business Manager:', didierBM.name);\n        }\n      }\n      \n      // Set default platform if available\n      if (response.data.user.facebook_pages && response.data.user.facebook_pages.length > 0) {\n        console.log('Personal pages found:', response.data.user.facebook_pages.length);\n      }\n      \n    } catch (error) {\n      console.error('Meta auth error:', error);\n      console.error('Error details:', error.response?.data);\n      \n      let errorMessage = 'Erreur lors de l\\'authentification Meta';\n      \n      if (error.response?.data?.detail) {\n        errorMessage = error.response.data.detail;\n      } else if (error.response?.status === 400) {\n        errorMessage = 'Token Facebook invalide ou expirÃ©';\n      } else if (error.response?.status >= 500) {\n        errorMessage = 'Erreur serveur. Veuillez rÃ©essayer.';\n      } else if (error.code === 'NETWORK_ERROR' || !error.response) {\n        errorMessage = 'Impossible de se connecter au serveur. VÃ©rifiez votre connexion.';\n      }\n      \n      alert(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleBusinessManagerSelect = (businessManager) => {\n    setSelectedBusinessManager(businessManager);\n    setSelectedPlatform(null); // Reset platform selection\n    \n    if (businessManager && user.business_managers) {\n      const bm = user.business_managers.find(b => b.id === businessManager.id);\n      if (bm) {\n        // Auto-select first available platform (priority: pages > groups > instagram)\n        if (bm.pages && bm.pages.length > 0) {\n          const firstPage = bm.pages[0];\n          firstPage._sourceType = 'business';\n          firstPage.platform = 'facebook';\n          firstPage.type = 'page';\n          setSelectedPlatform(firstPage);\n        } else if (bm.groups && bm.groups.length > 0) {\n          const firstGroup = bm.groups[0];\n          firstGroup._sourceType = 'business';\n          firstGroup.platform = 'facebook';\n          firstGroup.type = 'group';\n          setSelectedPlatform(firstGroup);\n        } else if (bm.instagram_accounts && bm.instagram_accounts.length > 0) {\n          const firstIG = bm.instagram_accounts[0];\n          firstIG._sourceType = 'business';\n          firstIG.platform = 'instagram';\n          firstIG.type = 'instagram';\n          setSelectedPlatform(firstIG);\n        }\n      }\n    }\n  };\n\n  const handlePostCreated = (newPost) => {\n    setPosts(prev => [newPost, ...prev]);\n  };\n\n  const handlePostDeleted = async (postId) => {\n    try {\n      await axios.delete(`${API_BASE}/api/posts/${postId}`);\n      setPosts(prev => prev.filter(post => post.id !== postId));\n    } catch (error) {\n      console.error('Error deleting post:', error);\n      alert('Erreur lors de la suppression du post');\n    }\n  };\n\n  const handlePostPublished = async (postId) => {\n    try {\n      setLoading(true);\n      await axios.post(`${API_BASE}/api/posts/${postId}/publish`);\n      await loadPosts(); // Reload to get updated status\n      alert('Post republiÃ© avec succÃ¨s !');\n    } catch (error) {\n      console.error('Error republishing post:', error);\n      alert('Erreur lors de la republication: ' + (error.response?.data?.detail || 'Erreur inconnue'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getPlatformIcon = (platform, type) => {\n    if (platform === 'instagram') return <Instagram className=\"w-4 h-4\" />;\n    if (type === 'group') return <MessageSquare className=\"w-4 h-4\" />;\n    return <Users className=\"w-4 h-4\" />; // Default for pages\n  };\n\n  const getPlatformStats = () => {\n    const totalPages = allPlatforms.personal_pages.length + allPlatforms.business_pages.length;\n    const totalGroups = allPlatforms.personal_groups.length + allPlatforms.business_groups.length;\n    const totalInstagram = allPlatforms.business_instagram.length;\n    const totalPlatforms = totalPages + totalGroups + totalInstagram;\n    \n    return { totalPages, totalGroups, totalInstagram, totalPlatforms };\n  };\n\n  // Show loading while Facebook SDK initializes\n  if (!fbInitialized) {\n    return (\n      <div className=\"min-h-screen bg-gray-facebook flex items-center justify-center\">\n        <div className=\"facebook-card p-8 max-w-md w-full mx-4 text-center\">\n          <div className=\"spinner mx-auto mb-4\" />\n          <p className=\"text-gray-600\">Chargement du SDK Meta...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen bg-gray-facebook\">\n        <div className=\"max-w-4xl mx-auto px-4 py-8\">\n          {/* Header */}\n          <div className=\"text-center mb-8\">\n            <div className=\"w-20 h-20 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <Instagram className=\"w-10 h-10 text-white\" />\n            </div>\n            <h1 className=\"text-4xl font-bold text-gray-800 mb-2\">Tunnel Instagram Gratuit</h1>\n            <p className=\"text-gray-600 text-lg\">Publication automatique sur Instagram @logicamp_berger</p>\n          </div>\n\n          {/* Instagram Tunnel Setup Component */}\n          <InstagramTunnelSetup \n            user={user}\n            onUserConnected={handleFacebookLogin}\n            onTunnelReady={(ready) => {\n              if (ready) {\n                console.log('Tunnel Instagram prÃªt !');\n              }\n            }}\n          />\n\n          {/* Alternative: Classic Login */}\n          <div className=\"mt-12 max-w-md mx-auto\">\n            <div className=\"facebook-card p-6\">\n              <h3 className=\"text-lg font-semibold text-gray-800 mb-4 text-center\">\n                Ou connexion classique\n              </h3>\n              <FacebookLogin onLogin={handleFacebookLogin} loading={loading} />\n              \n              <div className=\"mt-4 text-center text-sm text-gray-500\">\n                <p>âœ¨ AccÃ¨s complet aux plateformes Meta Business</p>\n                <div className=\"flex justify-center space-x-4 mt-2\">\n                  <span className=\"flex items-center space-x-1\">\n                    <Users className=\"w-3 h-3\" />\n                    <span>Pages</span>\n                  </span>\n                  <span className=\"flex items-center space-x-1\">\n                    <MessageSquare className=\"w-3 h-3\" />\n                    <span>Groupes</span>\n                  </span>\n                  <span className=\"flex items-center space-x-1\">\n                    <Instagram className=\"w-3 h-3\" />\n                    <span>Instagram</span>\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const stats = getPlatformStats();\n\n  return (\n    <div className=\"min-h-screen bg-gray-facebook\">\n      {/* Header */}\n      <header className=\"facebook-card mb-6 sticky top-0 z-50\">\n        <div className=\"max-w-6xl mx-auto px-4 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center\">\n                <Building2 className=\"w-6 h-6 text-white\" />\n              </div>\n              <div>\n                <h1 className=\"text-xl font-bold text-gray-800\">Meta Publishing Platform</h1>\n                <p className=\"text-sm text-gray-600\">Bienvenue, {user.name}</p>\n                {selectedBusinessManager && (\n                  <p className=\"text-xs text-blue-600\">ðŸ“Š {selectedBusinessManager.name}</p>\n                )}\n              </div>\n            </div>\n            \n            <div className=\"flex items-center space-x-4\">\n              <div className=\"hidden md:flex items-center space-x-4 text-sm text-gray-600\">\n                <span className=\"flex items-center space-x-1\">\n                  <Users className=\"w-3 h-3\" />\n                  <span>{stats.totalPages}</span>\n                </span>\n                <span className=\"flex items-center space-x-1\">\n                  <MessageSquare className=\"w-3 h-3\" />\n                  <span>{stats.totalGroups}</span>\n                </span>\n                <span className=\"flex items-center space-x-1\">\n                  <Instagram className=\"w-3 h-3\" />\n                  <span>{stats.totalInstagram}</span>\n                </span>\n              </div>\n              \n              <PlatformSelector \n                allPlatforms={allPlatforms}\n                selectedPlatform={selectedPlatform}\n                selectedBusinessManager={selectedBusinessManager}\n                onPlatformSelect={setSelectedPlatform}\n              />\n              \n              <button\n                onClick={() => {\n                  setUser(null);\n                  setPosts([]);\n                  setSelectedPlatform(null);\n                  setSelectedBusinessManager(null);\n                  setAllPlatforms({\n                    business_pages: [],\n                    business_groups: [],\n                    business_instagram: [],\n                    personal_pages: [],\n                    personal_groups: []\n                  });\n                }}\n                className=\"text-gray-600 hover:text-gray-800 transition-colors\"\n              >\n                DÃ©connexion\n              </button>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"max-w-6xl mx-auto px-4\">\n        {/* Business Manager Selection */}\n        {(!selectedBusinessManager || activeTab === 'setup') && (\n          <BusinessManagerSelector \n            user={user}\n            onBusinessManagerSelect={handleBusinessManagerSelect}\n          />\n        )}\n\n        {/* Navigation Tabs */}\n        <div className=\"facebook-card mb-6\">\n          <div className=\"flex border-b\">\n            <button\n              onClick={() => setActiveTab('setup')}\n              className={`px-6 py-3 font-medium transition-colors ${\n                activeTab === 'setup'\n                  ? 'text-facebook-primary border-b-2 border-facebook-primary'\n                  : 'text-gray-600 hover:text-facebook-primary'\n              }`}\n            >\n              <div className=\"flex items-center space-x-2\">\n                <Building2 className=\"w-4 h-4\" />\n                <span>Configuration</span>\n              </div>\n            </button>\n            \n            <button\n              onClick={() => setActiveTab('create')}\n              disabled={!selectedBusinessManager}\n              className={`px-6 py-3 font-medium transition-colors ${\n                activeTab === 'create'\n                  ? 'text-facebook-primary border-b-2 border-facebook-primary'\n                  : selectedBusinessManager \n                    ? 'text-gray-600 hover:text-facebook-primary' \n                    : 'text-gray-400 cursor-not-allowed'\n              }`}\n            >\n              <div className=\"flex items-center space-x-2\">\n                <Send className=\"w-4 h-4\" />\n                <span>CrÃ©er un Post</span>\n              </div>\n            </button>\n            \n            <button\n              onClick={() => setActiveTab('posts')}\n              disabled={!selectedBusinessManager}\n              className={`px-6 py-3 font-medium transition-colors ${\n                activeTab === 'posts'\n                  ? 'text-facebook-primary border-b-2 border-facebook-primary'\n                  : selectedBusinessManager \n                    ? 'text-gray-600 hover:text-facebook-primary'\n                    : 'text-gray-400 cursor-not-allowed'\n              }`}\n            >\n              <div className=\"flex items-center space-x-2\">\n                <Calendar className=\"w-4 h-4\" />\n                <span>Mes Posts ({posts.length})</span>\n              </div>\n            </button>\n            \n            <button\n              onClick={() => setActiveTab('webhook')}\n              disabled={!selectedBusinessManager}\n              className={`px-6 py-3 font-medium transition-colors ${\n                activeTab === 'webhook'\n                  ? 'text-facebook-primary border-b-2 border-facebook-primary'\n                  : selectedBusinessManager \n                    ? 'text-gray-600 hover:text-facebook-primary'\n                    : 'text-gray-400 cursor-not-allowed'\n              }`}\n            >\n              <div className=\"flex items-center space-x-2\">\n                <Package className=\"w-4 h-4\" />\n                <span>Historique Webhook</span>\n              </div>\n            </button>\n            \n            <button\n              onClick={() => setActiveTab('tunnel')}\n              className={`px-6 py-3 font-medium transition-colors ${\n                activeTab === 'tunnel'\n                  ? 'text-facebook-primary border-b-2 border-facebook-primary'\n                  : 'text-gray-600 hover:text-facebook-primary'\n              }`}\n            >\n              <div className=\"flex items-center space-x-2\">\n                <Instagram className=\"w-4 h-4\" />\n                <span>Tunnel Instagram</span>\n              </div>\n            </button>\n            \n            <button\n              onClick={() => setActiveTab('guide')}\n              className={`px-6 py-3 font-medium transition-colors ${\n                activeTab === 'guide'\n                  ? 'text-facebook-primary border-b-2 border-facebook-primary'\n                  : 'text-gray-600 hover:text-facebook-primary'\n              }`}\n            >\n              <div className=\"flex items-center space-x-2\">\n                <Instagram className=\"w-4 h-4\" />\n                <span>Guide Instagram</span>\n              </div>\n            </button>\n            \n            <button\n              onClick={() => setActiveTab('logicamp')}\n              className={`px-6 py-3 font-medium transition-colors ${\n                activeTab === 'logicamp'\n                  ? 'text-facebook-primary border-b-2 border-facebook-primary'\n                  : 'text-gray-600 hover:text-facebook-primary'\n              }`}\n            >\n              <div className=\"flex items-center space-x-2\">\n                <Instagram className=\"w-4 h-4\" />\n                <span>@logicamp_berger</span>\n              </div>\n            </button>\n            \n            <button\n              onClick={() => setActiveTab('multi-platform')}\n              className={`px-6 py-3 font-medium transition-colors ${\n                activeTab === 'multi-platform'\n                  ? 'text-facebook-primary border-b-2 border-facebook-primary'\n                  : 'text-gray-600 hover:text-facebook-primary'\n              }`}\n            >\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"w-4 h-4 bg-gradient-to-r from-blue-500 to-pink-500 rounded-full flex items-center justify-center\">\n                  <Instagram className=\"w-2 h-2 text-white\" />\n                </div>\n                <span>Connexion Multi-Plateformes</span>\n              </div>\n            </button>\n          </div>\n        </div>\n\n        {/* Content */}\n        {activeTab === 'setup' && (\n          <div className=\"space-y-6\">\n            {/* Tunnel Instagram Status Widget */}\n            <div className=\"facebook-card p-6\">\n              <TunnelStatusWidget user={user} />\n            </div>\n            \n            {/* Connection Status */}\n            <div className=\"facebook-card p-6\">\n              <ConnectionDiagnostic API_BASE={API_BASE} />\n            </div>\n            \n            {/* Facebook Connection Test */}\n            <div className=\"facebook-card p-6\">\n              <FacebookConnectionTest API_BASE={API_BASE} />\n            </div>\n            \n            {/* Instagram Diagnostics */}\n            <div className=\"facebook-card p-6\">\n              <InstagramDiagnostics API_BASE={API_BASE} />\n            </div>\n            \n            {/* Image Orientation Test */}\n            <div className=\"facebook-card p-6\">\n              <ImageOrientationTest />\n            </div>\n            \n            <div className=\"facebook-card p-6\">\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Statut de la configuration Meta</h3>\n            \n            <div className=\"space-y-4\">\n              <div className=\"flex items-center space-x-3\">\n                <div className={`w-3 h-3 rounded-full ${user ? 'bg-green-500' : 'bg-red-500'}`} />\n                <span>Connexion Meta : {user ? 'âœ… ConnectÃ©' : 'âŒ Non connectÃ©'}</span>\n              </div>\n              \n              <div className=\"flex items-center space-x-3\">\n                <div className={`w-3 h-3 rounded-full ${\n                  user?.business_managers?.length > 0 ? 'bg-green-500' : 'bg-yellow-500'\n                }`} />\n                <span>Business Managers : {user?.business_managers?.length || 0} trouvÃ©(s)</span>\n              </div>\n              \n              <div className=\"flex items-center space-x-3\">\n                <div className={`w-3 h-3 rounded-full ${selectedBusinessManager ? 'bg-green-500' : 'bg-gray-400'}`} />\n                <span>Business Manager sÃ©lectionnÃ© : {selectedBusinessManager ? selectedBusinessManager.name : 'Aucun'}</span>\n              </div>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6\">\n                {/* Facebook Pages */}\n                <div className=\"p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n                  <div className=\"flex items-center space-x-2 mb-2\">\n                    <Users className=\"w-5 h-5 text-blue-600\" />\n                    <span className=\"font-medium text-blue-800\">Pages Facebook</span>\n                  </div>\n                  <p className=\"text-2xl font-bold text-blue-600\">{stats.totalPages}</p>\n                  <p className=\"text-xs text-blue-600\">\n                    {allPlatforms.personal_pages.length} personnelles + {allPlatforms.business_pages.length} business\n                  </p>\n                </div>\n                \n                {/* Facebook Groups */}\n                <div className=\"p-4 bg-purple-50 border border-purple-200 rounded-lg\">\n                  <div className=\"flex items-center space-x-2 mb-2\">\n                    <MessageSquare className=\"w-5 h-5 text-purple-600\" />\n                    <span className=\"font-medium text-purple-800\">Groupes Facebook</span>\n                  </div>\n                  <p className=\"text-2xl font-bold text-purple-600\">{stats.totalGroups}</p>\n                  <p className=\"text-xs text-purple-600\">\n                    {allPlatforms.personal_groups.length} personnels + {allPlatforms.business_groups.length} business\n                  </p>\n                </div>\n                \n                {/* Instagram */}\n                <div className=\"p-4 bg-pink-50 border border-pink-200 rounded-lg\">\n                  <div className=\"flex items-center space-x-2 mb-2\">\n                    <Instagram className=\"w-5 h-5 text-pink-600\" />\n                    <span className=\"font-medium text-pink-800\">Instagram Business</span>\n                  </div>\n                  <p className=\"text-2xl font-bold text-pink-600\">{stats.totalInstagram}</p>\n                  <p className=\"text-xs text-pink-600\">\n                    Comptes connectÃ©s\n                  </p>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center space-x-3 mt-6\">\n                <div className={`w-3 h-3 rounded-full ${selectedPlatform ? 'bg-green-500' : 'bg-gray-400'}`} />\n                <span>Plateforme sÃ©lectionnÃ©e : {selectedPlatform ? `${selectedPlatform.name} (${selectedPlatform.platform})` : 'Aucune'}</span>\n              </div>\n            </div>\n            \n            {selectedBusinessManager && selectedPlatform && (\n              <div className=\"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg\">\n                <p className=\"text-green-800 font-medium\">ðŸŽ‰ Configuration terminÃ©e !</p>\n                <p className=\"text-green-700 text-sm mt-1\">\n                  Vous pouvez maintenant crÃ©er et publier des posts sur <strong>{selectedPlatform.name}</strong> \n                  {selectedPlatform.platform === 'instagram' && ' (Instagram)'}\n                  {selectedPlatform.type === 'group' && ' (Groupe)'}\n                  {selectedPlatform.type === 'page' && ' (Page)'}\n                </p>\n              </div>\n            )}\n            \n            {stats.totalPlatforms === 0 && selectedBusinessManager && (\n              <div className=\"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\n                <p className=\"text-yellow-800 font-medium\">âš ï¸ Aucune plateforme trouvÃ©e</p>\n                <p className=\"text-yellow-700 text-sm mt-1\">\n                  VÃ©rifiez les permissions et l'accÃ¨s aux pages/groupes/Instagram dans votre Business Manager.\n                </p>\n              </div>\n            )}\n          </div>\n          </div>\n        )}\n\n        {activeTab === 'create' && selectedBusinessManager && (\n          <PostCreator \n            user={user}\n            selectedPlatform={selectedPlatform}\n            selectedBusinessManager={selectedBusinessManager}\n            allPlatforms={allPlatforms}\n            onPostCreated={handlePostCreated}\n          />\n        )}\n\n        {activeTab === 'posts' && selectedBusinessManager && (\n          <PostList \n            posts={posts}\n            loading={loading}\n            onDelete={handlePostDeleted}\n            onPublish={handlePostPublished}\n            onRefresh={loadPosts}\n          />\n        )}\n\n        {activeTab === 'webhook' && selectedBusinessManager && (\n          <WebhookHistory />\n        )}\n\n        {activeTab === 'tunnel' && (\n          <InstagramTunnelSetup \n            user={user}\n            onUserConnected={handleFacebookLogin}\n            onTunnelReady={(ready) => {\n              if (ready) {\n                console.log('Tunnel Instagram activÃ© !');\n              }\n            }}\n          />\n        )}\n\n        {activeTab === 'guide' && (\n          <InstagramSetupGuide />\n        )}\n\n        {activeTab === 'logicamp' && (\n          <LogicampBergerSetup user={user} />\n        )}\n\n        {activeTab === 'multi-platform' && (\n          <LogicampBergerConnector \n            user={user} \n            onConnectionComplete={(platforms) => {\n              console.log('Connexion multi-plateformes Ã©tablie:', platforms);\n              // Optionnellement recharger les donnÃ©es utilisateur ou mettre Ã  jour l'Ã©tat\n              loadUserPlatforms();\n            }}\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}