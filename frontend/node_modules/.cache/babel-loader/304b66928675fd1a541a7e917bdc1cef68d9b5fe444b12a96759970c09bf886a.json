{"ast":null,"code":"import _objectSpread from\"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useCallback}from'react';import{useDropzone}from'react-dropzone';import{Image,Video,X,Upload}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MediaUploader=_ref=>{let{files,onFilesChange,disabled}=_ref;const onDrop=useCallback(acceptedFiles=>{if(disabled)return;const newFiles=[...files,...acceptedFiles].slice(0,4);// Limit to 4 files\nonFilesChange(newFiles);},[files,onFilesChange,disabled]);const{getRootProps,getInputProps,isDragActive}=useDropzone({onDrop,accept:{'image/*':['.png','.jpg','.jpeg','.gif','.webp'],'video/*':['.mp4','.mov','.avi','.mkv','.webm']},maxFiles:4,maxSize:100*1024*1024,// 100MB max per file\ndisabled});const removeFile=index=>{const newFiles=files.filter((_,i)=>i!==index);onFilesChange(newFiles);};const getFileIcon=file=>{if(file.type.startsWith('image/')){return/*#__PURE__*/_jsx(Image,{className:\"w-4 h-4\"});}else if(file.type.startsWith('video/')){return/*#__PURE__*/_jsx(Video,{className:\"w-4 h-4\"});}return/*#__PURE__*/_jsx(Upload,{className:\"w-4 h-4\"});};const getFilePreview=file=>{const url=URL.createObjectURL(file);const fileSize=(file.size/(1024*1024)).toFixed(1);// Size in MB\nif(file.type.startsWith('image/')){return/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:url,alt:\"Preview\",className:\"w-full h-20 object-contain bg-gray-100 rounded\",onLoad:()=>URL.revokeObjectURL(url)}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 rounded-b\",children:[\"\\uD83D\\uDCF8 \",fileSize,\"MB\"]})]});}else if(file.type.startsWith('video/')){return/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"video\",{src:url,className:\"w-full h-20 object-contain bg-gray-100 rounded\",onLoadedData:()=>URL.revokeObjectURL(url),muted:true}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center rounded\",children:/*#__PURE__*/_jsx(Video,{className:\"w-6 h-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 rounded-b\",children:[\"\\uD83C\\uDFA5 \",fileSize,\"MB\"]})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full h-20 bg-gray-100 rounded flex items-center justify-center flex-col\",children:[getFileIcon(file),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-500 mt-1\",children:[fileSize,\"MB\"]})]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread({},getRootProps()),{},{className:\"dropzone \".concat(isDragActive?'active':'',\" \").concat(disabled?'opacity-50 cursor-not-allowed':''),children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({},getInputProps())),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(Upload,{className:\"w-8 h-8 text-gray-400 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:isDragActive?'DÃ©posez les fichiers ici...':'Cliquez ou glissez des images/vidÃ©os'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Maximum 4 fichiers \\u2022 PNG, JPG, GIF, WebP, MP4, MOV, AVI \\u2022 Max 100MB par fichier\"})]})]})),files.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 gap-4\",children:files.map((file,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border rounded-lg overflow-hidden\",children:getFilePreview(file)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFile(index),className:\"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\",disabled:disabled,children:/*#__PURE__*/_jsx(X,{className:\"w-3 h-3\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-1 text-xs text-gray-500 truncate\",children:file.name})]},index))}),files.length>=4&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-orange-500\",children:\"Limite de 4 fichiers atteinte\"})]});};export default MediaUploader;","map":{"version":3,"names":["React","useCallback","useDropzone","Image","Video","X","Upload","jsx","_jsx","jsxs","_jsxs","MediaUploader","_ref","files","onFilesChange","disabled","onDrop","acceptedFiles","newFiles","slice","getRootProps","getInputProps","isDragActive","accept","maxFiles","maxSize","removeFile","index","filter","_","i","getFileIcon","file","type","startsWith","className","getFilePreview","url","URL","createObjectURL","fileSize","size","toFixed","children","src","alt","onLoad","revokeObjectURL","onLoadedData","muted","_objectSpread","concat","length","map","onClick","name"],"sources":["/app/frontend/src/components/MediaUploader.js"],"sourcesContent":["import React, { useCallback } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport { Image, Video, X, Upload } from 'lucide-react';\n\nconst MediaUploader = ({ files, onFilesChange, disabled }) => {\n  const onDrop = useCallback((acceptedFiles) => {\n    if (disabled) return;\n    \n    const newFiles = [...files, ...acceptedFiles].slice(0, 4); // Limit to 4 files\n    onFilesChange(newFiles);\n  }, [files, onFilesChange, disabled]);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: {\n      'image/*': ['.png', '.jpg', '.jpeg', '.gif', '.webp'],\n      'video/*': ['.mp4', '.mov', '.avi', '.mkv', '.webm']\n    },\n    maxFiles: 4,\n    maxSize: 100 * 1024 * 1024, // 100MB max per file\n    disabled\n  });\n\n  const removeFile = (index) => {\n    const newFiles = files.filter((_, i) => i !== index);\n    onFilesChange(newFiles);\n  };\n\n  const getFileIcon = (file) => {\n    if (file.type.startsWith('image/')) {\n      return <Image className=\"w-4 h-4\" />;\n    } else if (file.type.startsWith('video/')) {\n      return <Video className=\"w-4 h-4\" />;\n    }\n    return <Upload className=\"w-4 h-4\" />;\n  };\n\n  const getFilePreview = (file) => {\n    const url = URL.createObjectURL(file);\n    const fileSize = (file.size / (1024 * 1024)).toFixed(1); // Size in MB\n    \n    if (file.type.startsWith('image/')) {\n      return (\n        <div className=\"relative\">\n          <img \n            src={url} \n            alt=\"Preview\" \n            className=\"w-full h-20 object-contain bg-gray-100 rounded\"\n            onLoad={() => URL.revokeObjectURL(url)}\n          />\n          <div className=\"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 rounded-b\">\n            ðŸ“¸ {fileSize}MB\n          </div>\n        </div>\n      );\n    } else if (file.type.startsWith('video/')) {\n      return (\n        <div className=\"relative\">\n          <video \n            src={url} \n            className=\"w-full h-20 object-contain bg-gray-100 rounded\"\n            onLoadedData={() => URL.revokeObjectURL(url)}\n            muted\n          />\n          <div className=\"absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center rounded\">\n            <Video className=\"w-6 h-6 text-white\" />\n          </div>\n          <div className=\"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 rounded-b\">\n            ðŸŽ¥ {fileSize}MB\n          </div>\n        </div>\n      );\n    }\n    \n    return (\n      <div className=\"w-full h-20 bg-gray-100 rounded flex items-center justify-center flex-col\">\n        {getFileIcon(file)}\n        <span className=\"text-xs text-gray-500 mt-1\">{fileSize}MB</span>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Dropzone */}\n      <div\n        {...getRootProps()}\n        className={`dropzone ${isDragActive ? 'active' : ''} ${disabled ? 'opacity-50 cursor-not-allowed' : ''}`}\n      >\n        <input {...getInputProps()} />\n        <div className=\"text-center\">\n          <Upload className=\"w-8 h-8 text-gray-400 mx-auto mb-2\" />\n          <p className=\"text-gray-600\">\n            {isDragActive ? 'DÃ©posez les fichiers ici...' : 'Cliquez ou glissez des images/vidÃ©os'}\n          </p>\n          <p className=\"text-xs text-gray-500 mt-1\">\n            Maximum 4 fichiers â€¢ PNG, JPG, GIF, WebP, MP4, MOV, AVI â€¢ Max 100MB par fichier\n          </p>\n        </div>\n      </div>\n\n      {/* File List */}\n      {files.length > 0 && (\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n          {files.map((file, index) => (\n            <div key={index} className=\"relative group\">\n              <div className=\"border rounded-lg overflow-hidden\">\n                {getFilePreview(file)}\n              </div>\n              \n              <button\n                onClick={() => removeFile(index)}\n                className=\"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\"\n                disabled={disabled}\n              >\n                <X className=\"w-3 h-3\" />\n              </button>\n              \n              <div className=\"mt-1 text-xs text-gray-500 truncate\">\n                {file.name}\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {files.length >= 4 && (\n        <p className=\"text-xs text-orange-500\">\n          Limite de 4 fichiers atteinte\n        </p>\n      )}\n    </div>\n  );\n};\n\nexport default MediaUploader;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}