{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Package,Calendar,ExternalLink,CheckCircle,XCircle,RefreshCw,Store,Users,MessageSquare,Instagram}from'lucide-react';import MultiPlatformStatus from'./MultiPlatformStatus';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE=process.env.REACT_APP_BACKEND_URL||'';const WebhookHistory=()=>{const[webhookPosts,setWebhookPosts]=useState([]);const[loading,setLoading]=useState(false);const[shopMapping,setShopMapping]=useState({});useEffect(()=>{loadWebhookHistory();},[]);const loadWebhookHistory=async()=>{try{setLoading(true);const response=await axios.get(\"\".concat(API_BASE,\"/api/webhook-history?limit=100\"));setWebhookPosts(response.data.data.webhook_posts||[]);setShopMapping(response.data.data.shop_mapping||{});}catch(error){console.error('Error loading webhook history:',error);}finally{setLoading(false);}};const getShopIcon=shopType=>{const icons={outdoor:'üèïÔ∏è',gizmobbs:'üì±',logicantiq:'üèõÔ∏è'};return icons[shopType]||'üè™';};const getShopColor=shopType=>{const colors={outdoor:'bg-green-100 text-green-800 border-green-200',gizmobbs:'bg-blue-100 text-blue-800 border-blue-200',logicantiq:'bg-purple-100 text-purple-800 border-purple-200'};return colors[shopType]||'bg-gray-100 text-gray-800 border-gray-200';};const formatDate=dateString=>{return new Date(dateString).toLocaleString('fr-FR',{day:'2-digit',month:'2-digit',year:'numeric',hour:'2-digit',minute:'2-digit'});};const getStatusBadge=post=>{// Check if this is a comprehensive multi-platform post\nconst isMultiPlatform=post.publication_results||post.comprehensive_cross_post;const hasPublicationSummary=post.publication_summary;if(post.status==='published'){if(isMultiPlatform&&hasPublicationSummary){const{total_published,total_failed}=post.publication_summary;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-3 h-3 mr-1\"}),\"Multi-Plateforme\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800\",children:[\"\\u2705 \",total_published,\" | \\u274C \",total_failed]})]});}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-3 h-3 mr-1\"}),\"Publi\\xE9\"]}),post.comment_added&&/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800\",children:\"\\uD83D\\uDCAC Lien ajout\\xE9\"})]});}}return/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800\",children:[/*#__PURE__*/_jsx(XCircle,{className:\"w-3 h-3 mr-1\"}),\"\\xC9chec\"]});};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"facebook-card p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner mr-3\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Chargement de l'historique...\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"facebook-card p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(Package,{className:\"w-6 h-6 text-facebook-primary\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-800\",children:\"Historique des Publications Webhook\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Publications automatiques re\\xE7ues depuis N8N\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:loadWebhookHistory,disabled:loading,className:\"btn btn-secondary flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(RefreshCw,{className:\"w-4 h-4 \".concat(loading?'animate-spin':'')}),/*#__PURE__*/_jsx(\"span\",{children:\"Actualiser\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-700 mb-3\",children:\"R\\xE9partition par boutique :\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:Object.entries(shopMapping).map(_ref=>{let[shopType,config]=_ref;const count=webhookPosts.filter(post=>post.shop_type===shopType).length;return/*#__PURE__*/_jsxs(\"div\",{className:\"px-3 py-1 rounded-full text-xs font-medium border \".concat(getShopColor(shopType)),children:[getShopIcon(shopType),\" \",config.name,\" (\",count,\")\"]},shopType);})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"facebook-card\",children:webhookPosts.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"p-8 text-center\",children:[/*#__PURE__*/_jsx(Package,{className:\"w-12 h-12 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"Aucune publication webhook\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Les publications automatiques depuis N8N appara\\xEEtront ici.\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"divide-y divide-gray-200\",children:webhookPosts.map((post,index)=>{var _shopMapping$post$sho;return/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:post.image_url?/*#__PURE__*/_jsx(\"img\",{src:post.image_url,alt:post.title,className:\"w-16 h-16 rounded-lg object-contain bg-gray-100 border\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 rounded-lg bg-gray-200 flex items-center justify-center\",children:/*#__PURE__*/_jsx(Package,{className:\"w-6 h-6 text-gray-400\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 truncate\",children:post.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1 line-clamp-2\",children:post.description})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 ml-4\",children:getStatusBadge(post)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 flex flex-wrap items-center gap-4 text-sm text-gray-500\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(Store,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"px-2 py-0.5 rounded text-xs font-medium \".concat(getShopColor(post.shop_type)),children:[getShopIcon(post.shop_type),\" \",((_shopMapping$post$sho=shopMapping[post.shop_type])===null||_shopMapping$post$sho===void 0?void 0:_shopMapping$post$sho.name)||post.shop_type]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDCC4\"}),/*#__PURE__*/_jsx(\"span\",{children:post.page_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:formatDate(post.received_at)})]}),post.product_url&&/*#__PURE__*/_jsxs(\"a\",{href:post.product_url,target:\"_blank\",rel:\"noopener noreferrer\",className:\"flex items-center space-x-1 text-facebook-primary hover:text-facebook-secondary transition-colors\",children:[/*#__PURE__*/_jsx(ExternalLink,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Voir le produit\"})]}),post.facebook_post_id&&/*#__PURE__*/_jsxs(\"a\",{href:\"https://facebook.com/\".concat(post.facebook_post_id),target:\"_blank\",rel:\"noopener noreferrer\",className:\"flex items-center space-x-1 text-blue-600 hover:text-blue-700 transition-colors\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDCD8\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Voir sur Facebook\"})]})]})]})]})},post.id||index);})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"facebook-card p-6 bg-blue-50 border-blue-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-blue-900 mb-3\",children:\"Configuration N8N\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-800 mb-3\",children:[\"Pour publier automatiquement sur une boutique sp\\xE9cifique, ajoutez le param\\xE8tre \",/*#__PURE__*/_jsx(\"code\",{className:\"bg-blue-100 px-1 py-0.5 rounded\",children:\"shop_type\"}),\" dans votre requ\\xEAte N8N :\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-100 rounded-lg p-3 text-sm\",children:/*#__PURE__*/_jsx(\"pre\",{className:\"text-blue-900\",children:\"{\\n  \\\"title\\\": \\\"Produit example\\\",\\n  \\\"description\\\": \\\"Description du produit\\\",\\n  \\\"image_url\\\": \\\"https://...\\\",\\n  \\\"product_url\\\": \\\"https://...\\\",\\n  \\\"shop_type\\\": \\\"logicantiq\\\"  // \\\"outdoor\\\", \\\"gizmobbs\\\", \\\"logicantiq\\\"\\n}\"})})]})]});};export default WebhookHistory;","map":{"version":3,"names":["React","useState","useEffect","axios","Package","Calendar","ExternalLink","CheckCircle","XCircle","RefreshCw","Store","Users","MessageSquare","Instagram","MultiPlatformStatus","jsx","_jsx","jsxs","_jsxs","API_BASE","process","env","REACT_APP_BACKEND_URL","WebhookHistory","webhookPosts","setWebhookPosts","loading","setLoading","shopMapping","setShopMapping","loadWebhookHistory","response","get","concat","data","webhook_posts","shop_mapping","error","console","getShopIcon","shopType","icons","outdoor","gizmobbs","logicantiq","getShopColor","colors","formatDate","dateString","Date","toLocaleString","day","month","year","hour","minute","getStatusBadge","post","isMultiPlatform","publication_results","comprehensive_cross_post","hasPublicationSummary","publication_summary","status","total_published","total_failed","className","children","comment_added","onClick","disabled","Object","entries","map","_ref","config","count","filter","shop_type","length","name","index","_shopMapping$post$sho","image_url","src","alt","title","description","page_name","received_at","product_url","href","target","rel","facebook_post_id","id"],"sources":["/app/frontend/src/components/WebhookHistory.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Package, Calendar, ExternalLink, CheckCircle, XCircle, RefreshCw, Store, Users, MessageSquare, Instagram } from 'lucide-react';\nimport MultiPlatformStatus from './MultiPlatformStatus';\n\nconst API_BASE = process.env.REACT_APP_BACKEND_URL || '';\n\nconst WebhookHistory = () => {\n  const [webhookPosts, setWebhookPosts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [shopMapping, setShopMapping] = useState({});\n\n  useEffect(() => {\n    loadWebhookHistory();\n  }, []);\n\n  const loadWebhookHistory = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get(`${API_BASE}/api/webhook-history?limit=100`);\n      setWebhookPosts(response.data.data.webhook_posts || []);\n      setShopMapping(response.data.data.shop_mapping || {});\n    } catch (error) {\n      console.error('Error loading webhook history:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getShopIcon = (shopType) => {\n    const icons = {\n      outdoor: 'üèïÔ∏è',\n      gizmobbs: 'üì±',\n      logicantiq: 'üèõÔ∏è'\n    };\n    return icons[shopType] || 'üè™';\n  };\n\n  const getShopColor = (shopType) => {\n    const colors = {\n      outdoor: 'bg-green-100 text-green-800 border-green-200',\n      gizmobbs: 'bg-blue-100 text-blue-800 border-blue-200', \n      logicantiq: 'bg-purple-100 text-purple-800 border-purple-200'\n    };\n    return colors[shopType] || 'bg-gray-100 text-gray-800 border-gray-200';\n  };\n\n  const formatDate = (dateString) => {\n    return new Date(dateString).toLocaleString('fr-FR', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const getStatusBadge = (post) => {\n    // Check if this is a comprehensive multi-platform post\n    const isMultiPlatform = post.publication_results || post.comprehensive_cross_post;\n    const hasPublicationSummary = post.publication_summary;\n    \n    if (post.status === 'published') {\n      if (isMultiPlatform && hasPublicationSummary) {\n        const { total_published, total_failed } = post.publication_summary;\n        return (\n          <div className=\"flex items-center space-x-2\">\n            <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\">\n              <CheckCircle className=\"w-3 h-3 mr-1\" />\n              Multi-Plateforme\n            </span>\n            <span className=\"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\n              ‚úÖ {total_published} | ‚ùå {total_failed}\n            </span>\n          </div>\n        );\n      } else {\n        return (\n          <div className=\"flex items-center space-x-2\">\n            <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\">\n              <CheckCircle className=\"w-3 h-3 mr-1\" />\n              Publi√©\n            </span>\n            {post.comment_added && (\n              <span className=\"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\n                üí¨ Lien ajout√©\n              </span>\n            )}\n          </div>\n        );\n      }\n    }\n    return (\n      <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800\">\n        <XCircle className=\"w-3 h-3 mr-1\" />\n        √âchec\n      </span>\n    );\n  };\n\n  if (loading) {\n    return (\n      <div className=\"facebook-card p-6\">\n        <div className=\"flex items-center justify-center\">\n          <div className=\"spinner mr-3\" />\n          <span>Chargement de l'historique...</span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"facebook-card p-6\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-3\">\n            <Package className=\"w-6 h-6 text-facebook-primary\" />\n            <div>\n              <h2 className=\"text-xl font-bold text-gray-800\">Historique des Publications Webhook</h2>\n              <p className=\"text-sm text-gray-600\">Publications automatiques re√ßues depuis N8N</p>\n            </div>\n          </div>\n          \n          <button\n            onClick={loadWebhookHistory}\n            disabled={loading}\n            className=\"btn btn-secondary flex items-center space-x-2\"\n          >\n            <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />\n            <span>Actualiser</span>\n          </button>\n        </div>\n\n        {/* Shop Types Summary */}\n        <div className=\"mt-6\">\n          <h3 className=\"text-sm font-medium text-gray-700 mb-3\">R√©partition par boutique :</h3>\n          <div className=\"flex flex-wrap gap-2\">\n            {Object.entries(shopMapping).map(([shopType, config]) => {\n              const count = webhookPosts.filter(post => post.shop_type === shopType).length;\n              return (\n                <div key={shopType} className={`px-3 py-1 rounded-full text-xs font-medium border ${getShopColor(shopType)}`}>\n                  {getShopIcon(shopType)} {config.name} ({count})\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n\n      {/* Webhook Posts List */}\n      <div className=\"facebook-card\">\n        {webhookPosts.length === 0 ? (\n          <div className=\"p-8 text-center\">\n            <Package className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Aucune publication webhook</h3>\n            <p className=\"text-gray-600\">\n              Les publications automatiques depuis N8N appara√Ætront ici.\n            </p>\n          </div>\n        ) : (\n          <div className=\"divide-y divide-gray-200\">\n            {webhookPosts.map((post, index) => (\n              <div key={post.id || index} className=\"p-6\">\n                <div className=\"flex items-start space-x-4\">\n                  {/* Product Image */}\n                  <div className=\"flex-shrink-0\">\n                    {post.image_url ? (\n                      <img\n                        src={post.image_url}\n                        alt={post.title}\n                        className=\"w-16 h-16 rounded-lg object-contain bg-gray-100 border\"\n                      />\n                    ) : (\n                      <div className=\"w-16 h-16 rounded-lg bg-gray-200 flex items-center justify-center\">\n                        <Package className=\"w-6 h-6 text-gray-400\" />\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Content */}\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex-1 min-w-0\">\n                        <h3 className=\"text-lg font-semibold text-gray-900 truncate\">\n                          {post.title}\n                        </h3>\n                        <p className=\"text-sm text-gray-600 mt-1 line-clamp-2\">\n                          {post.description}\n                        </p>\n                      </div>\n                      \n                      <div className=\"flex-shrink-0 ml-4\">\n                        {getStatusBadge(post)}\n                      </div>\n                    </div>\n\n                    {/* Meta Information */}\n                    <div className=\"mt-3 flex flex-wrap items-center gap-4 text-sm text-gray-500\">\n                      {/* Shop Type */}\n                      <div className=\"flex items-center space-x-1\">\n                        <Store className=\"w-4 h-4\" />\n                        <span className={`px-2 py-0.5 rounded text-xs font-medium ${getShopColor(post.shop_type)}`}>\n                          {getShopIcon(post.shop_type)} {shopMapping[post.shop_type]?.name || post.shop_type}\n                        </span>\n                      </div>\n\n                      {/* Page */}\n                      <div className=\"flex items-center space-x-1\">\n                        <span>üìÑ</span>\n                        <span>{post.page_name}</span>\n                      </div>\n\n                      {/* Date */}\n                      <div className=\"flex items-center space-x-1\">\n                        <Calendar className=\"w-4 h-4\" />\n                        <span>{formatDate(post.received_at)}</span>\n                      </div>\n\n                      {/* Product Link */}\n                      {post.product_url && (\n                        <a\n                          href={post.product_url}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"flex items-center space-x-1 text-facebook-primary hover:text-facebook-secondary transition-colors\"\n                        >\n                          <ExternalLink className=\"w-4 h-4\" />\n                          <span>Voir le produit</span>\n                        </a>\n                      )}\n\n                      {/* Facebook Post Link */}\n                      {post.facebook_post_id && (\n                        <a\n                          href={`https://facebook.com/${post.facebook_post_id}`}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"flex items-center space-x-1 text-blue-600 hover:text-blue-700 transition-colors\"\n                        >\n                          <span>üìò</span>\n                          <span>Voir sur Facebook</span>\n                        </a>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Usage Information */}\n      <div className=\"facebook-card p-6 bg-blue-50 border-blue-200\">\n        <h3 className=\"text-lg font-medium text-blue-900 mb-3\">Configuration N8N</h3>\n        <p className=\"text-sm text-blue-800 mb-3\">\n          Pour publier automatiquement sur une boutique sp√©cifique, ajoutez le param√®tre <code className=\"bg-blue-100 px-1 py-0.5 rounded\">shop_type</code> dans votre requ√™te N8N :\n        </p>\n        <div className=\"bg-blue-100 rounded-lg p-3 text-sm\">\n          <pre className=\"text-blue-900\">\n{`{\n  \"title\": \"Produit example\",\n  \"description\": \"Description du produit\",\n  \"image_url\": \"https://...\",\n  \"product_url\": \"https://...\",\n  \"shop_type\": \"logicantiq\"  // \"outdoor\", \"gizmobbs\", \"logicantiq\"\n}`}\n          </pre>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default WebhookHistory;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}