{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE=process.env.REACT_APP_BACKEND_URL||'';const ImageOrientationTest=()=>{const[result,setResult]=useState(null);const[loading,setLoading]=useState(false);const[selectedFile,setSelectedFile]=useState(null);const handleFileSelect=event=>{const file=event.target.files[0];if(file&&file.type.startsWith('image/')){setSelectedFile(file);setResult(null);}};const testImageOrientation=async()=>{if(!selectedFile)return;try{setLoading(true);const formData=new FormData();formData.append('image',selectedFile);const response=await axios.post(\"\".concat(API_BASE,\"/api/debug/test-image-orientation-fix\"),formData,{headers:{'Content-Type':'multipart/form-data'}});setResult(response.data);}catch(error){var _error$response,_error$response$data;console.error('Error testing image orientation:',error);setResult({success:false,error:((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||error.message});}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"facebook-card p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800 mb-4\",children:\"\\uD83D\\uDDBC\\uFE0F Test de Correction d'Orientation des Images\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"S\\xE9lectionner une image (de pr\\xE9f\\xE9rence verticale ou avec m\\xE9tadonn\\xE9es EXIF) :\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleFileSelect,className:\"facebook-input\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:testImageOrientation,disabled:!selectedFile||loading,className:\"facebook-button disabled:opacity-50\",children:loading?'üîÑ Test en cours...':'üß™ Tester la Correction d\\'Orientation'}),result&&/*#__PURE__*/_jsx(\"div\",{className:\"p-4 rounded-lg border \".concat(result.success?'bg-green-50 border-green-200':'bg-red-50 border-red-200'),children:result.success?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-semibold text-green-800 mb-3\",children:[\"\\u2705 \",result.message]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium text-gray-700\",children:\"Image Originale:\"}),/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(API_BASE).concat(result.original_image.url),alt:\"Image originale\",className:\"w-full max-h-60 object-contain bg-gray-100 rounded border\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"Taille: \",(result.original_image.size_bytes/1024).toFixed(1),\" KB\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium text-gray-700\",children:\"Image Optimis\\xE9e (avec correction EXIF):\"}),/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(API_BASE).concat(result.optimized_image.url),alt:\"Image optimis\\xE9e\",className:\"w-full max-h-60 object-contain bg-gray-100 rounded border\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"Taille: \",(result.optimized_image.size_bytes/1024).toFixed(1),\" KB\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-3 bg-blue-50 rounded border-l-4 border-blue-400\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Optimisation appliqu\\xE9e:\"}),\" \",result.optimization_applied]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-700 mt-1\",children:result.note})]})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-red-800 mb-2\",children:\"\\u274C \\xC9chec du Test\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-700\",children:result.error})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 p-4 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-800 mb-2\",children:\"\\xC0 propos de cette correction :\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"text-sm text-gray-700 space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 \\u2705 Correction automatique de l'orientation EXIF\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 \\u2705 Support des rotations 90\\xB0, 180\\xB0, 270\\xB0\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 \\u2705 CSS `object-contain` au lieu d'`object-cover`\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 \\u2705 Pr\\xE9servation du ratio d'aspect original\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2022 \\u2705 Compatible avec toutes les plateformes (Facebook, Instagram)\"})]})]})]});};export default ImageOrientationTest;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","API_BASE","process","env","REACT_APP_BACKEND_URL","ImageOrientationTest","result","setResult","loading","setLoading","selectedFile","setSelectedFile","handleFileSelect","event","file","target","files","type","startsWith","testImageOrientation","formData","FormData","append","response","post","concat","headers","data","error","_error$response","_error$response$data","console","success","detail","message","className","children","accept","onChange","onClick","disabled","src","original_image","url","alt","size_bytes","toFixed","optimized_image","optimization_applied","note"],"sources":["/app/frontend/src/components/ImageOrientationTest.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\n\nconst API_BASE = process.env.REACT_APP_BACKEND_URL || '';\n\nconst ImageOrientationTest = () => {\n  const [result, setResult] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [selectedFile, setSelectedFile] = useState(null);\n\n  const handleFileSelect = (event) => {\n    const file = event.target.files[0];\n    if (file && file.type.startsWith('image/')) {\n      setSelectedFile(file);\n      setResult(null);\n    }\n  };\n\n  const testImageOrientation = async () => {\n    if (!selectedFile) return;\n    \n    try {\n      setLoading(true);\n      \n      const formData = new FormData();\n      formData.append('image', selectedFile);\n      \n      const response = await axios.post(\n        `${API_BASE}/api/debug/test-image-orientation-fix`,\n        formData,\n        {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n          },\n        }\n      );\n      \n      setResult(response.data);\n    } catch (error) {\n      console.error('Error testing image orientation:', error);\n      setResult({\n        success: false,\n        error: error.response?.data?.detail || error.message\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"facebook-card p-6\">\n      <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">\n        üñºÔ∏è Test de Correction d'Orientation des Images\n      </h3>\n      \n      <div className=\"space-y-4\">\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            S√©lectionner une image (de pr√©f√©rence verticale ou avec m√©tadonn√©es EXIF) :\n          </label>\n          <input\n            type=\"file\"\n            accept=\"image/*\"\n            onChange={handleFileSelect}\n            className=\"facebook-input\"\n          />\n        </div>\n        \n        <button\n          onClick={testImageOrientation}\n          disabled={!selectedFile || loading}\n          className=\"facebook-button disabled:opacity-50\"\n        >\n          {loading ? 'üîÑ Test en cours...' : 'üß™ Tester la Correction d\\'Orientation'}\n        </button>\n        \n        {result && (\n          <div className={`p-4 rounded-lg border ${result.success ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'}`}>\n            {result.success ? (\n              <div>\n                <h4 className=\"font-semibold text-green-800 mb-3\">\n                  ‚úÖ {result.message}\n                </h4>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  {/* Image originale */}\n                  <div className=\"space-y-2\">\n                    <h5 className=\"font-medium text-gray-700\">Image Originale:</h5>\n                    <img\n                      src={`${API_BASE}${result.original_image.url}`}\n                      alt=\"Image originale\"\n                      className=\"w-full max-h-60 object-contain bg-gray-100 rounded border\"\n                    />\n                    <p className=\"text-sm text-gray-600\">\n                      Taille: {(result.original_image.size_bytes / 1024).toFixed(1)} KB\n                    </p>\n                  </div>\n                  \n                  {/* Image optimis√©e */}\n                  <div className=\"space-y-2\">\n                    <h5 className=\"font-medium text-gray-700\">Image Optimis√©e (avec correction EXIF):</h5>\n                    <img\n                      src={`${API_BASE}${result.optimized_image.url}`}\n                      alt=\"Image optimis√©e\"\n                      className=\"w-full max-h-60 object-contain bg-gray-100 rounded border\"\n                    />\n                    <p className=\"text-sm text-gray-600\">\n                      Taille: {(result.optimized_image.size_bytes / 1024).toFixed(1)} KB\n                    </p>\n                  </div>\n                </div>\n                \n                <div className=\"mt-4 p-3 bg-blue-50 rounded border-l-4 border-blue-400\">\n                  <p className=\"text-sm text-blue-800\">\n                    <strong>Optimisation appliqu√©e:</strong> {result.optimization_applied}\n                  </p>\n                  <p className=\"text-sm text-blue-700 mt-1\">\n                    {result.note}\n                  </p>\n                </div>\n              </div>\n            ) : (\n              <div>\n                <h4 className=\"font-semibold text-red-800 mb-2\">\n                  ‚ùå √âchec du Test\n                </h4>\n                <p className=\"text-red-700\">{result.error}</p>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n      \n      <div className=\"mt-6 p-4 bg-gray-50 rounded-lg\">\n        <h4 className=\"font-medium text-gray-800 mb-2\">√Ä propos de cette correction :</h4>\n        <ul className=\"text-sm text-gray-700 space-y-1\">\n          <li>‚Ä¢ ‚úÖ Correction automatique de l'orientation EXIF</li>\n          <li>‚Ä¢ ‚úÖ Support des rotations 90¬∞, 180¬∞, 270¬∞</li>\n          <li>‚Ä¢ ‚úÖ CSS `object-contain` au lieu d'`object-cover`</li>\n          <li>‚Ä¢ ‚úÖ Pr√©servation du ratio d'aspect original</li>\n          <li>‚Ä¢ ‚úÖ Compatible avec toutes les plateformes (Facebook, Instagram)</li>\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default ImageOrientationTest;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}