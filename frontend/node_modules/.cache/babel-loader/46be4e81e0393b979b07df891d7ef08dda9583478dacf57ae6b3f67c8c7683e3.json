{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Instagram,CheckCircle,AlertCircle,ArrowRight}from'lucide-react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TunnelStatusWidget=_ref=>{let{user}=_ref;const[tunnelStatus,setTunnelStatus]=useState('checking');const[instagramAccounts,setInstagramAccounts]=useState([]);const API_BASE=process.env.REACT_APP_BACKEND_URL||'';useEffect(()=>{if(user){checkTunnelStatus();}},[user]);const checkTunnelStatus=async()=>{try{const response=await axios.get(\"\".concat(API_BASE,\"/api/debug/instagram-complete-diagnosis\"));const diagnosis=response.data;if(diagnosis.instagram_accounts&&diagnosis.instagram_accounts.length>0){setInstagramAccounts(diagnosis.instagram_accounts);const hasLogicampBerger=diagnosis.instagram_accounts.some(account=>account.username==='logicamp_berger');setTunnelStatus(hasLogicampBerger?'ready':'no_logicamp');}else{setTunnelStatus('no_instagram');}}catch(error){console.error('Erreur check tunnel status:',error);setTunnelStatus('error');}};if(tunnelStatus==='ready'){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-50 border border-green-200 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(Instagram,{className:\"w-5 h-5 text-green-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-green-900\",children:\"Tunnel Instagram Actif\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-green-700\",children:\"@logicamp_berger connect\\xE9\"})]})]}),/*#__PURE__*/_jsx(CheckCircle,{className:\"w-5 h-5 text-green-600\"})]})});}if(tunnelStatus==='no_instagram'||tunnelStatus==='no_logicamp'){return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(AlertCircle,{className:\"w-5 h-5 text-yellow-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-yellow-900\",children:tunnelStatus==='no_instagram'?'Tunnel Instagram Inactif':'@logicamp_berger Manquant'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-yellow-700\",children:tunnelStatus==='no_instagram'?'Aucun compte Instagram connecté':\"\".concat(instagramAccounts.length,\" compte(s) trouv\\xE9(s), mais pas @logicamp_berger\")})]})]}),/*#__PURE__*/_jsx(ArrowRight,{className:\"w-5 h-5 text-yellow-600\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 pt-3 border-t border-yellow-200\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-yellow-700\",children:\"Activez le tunnel dans l'onglet \\\"Tunnel Instagram\\\" pour publier automatiquement sur Instagram\"})})]});}if(tunnelStatus==='checking'){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-blue-900\",children:\"V\\xE9rification Tunnel Instagram\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-700\",children:\"Analyse des comptes connect\\xE9s...\"})]})]})});}return null;};export default TunnelStatusWidget;","map":{"version":3,"names":["React","useState","useEffect","Instagram","CheckCircle","AlertCircle","ArrowRight","axios","jsx","_jsx","jsxs","_jsxs","TunnelStatusWidget","_ref","user","tunnelStatus","setTunnelStatus","instagramAccounts","setInstagramAccounts","API_BASE","process","env","REACT_APP_BACKEND_URL","checkTunnelStatus","response","get","concat","diagnosis","data","instagram_accounts","length","hasLogicampBerger","some","account","username","error","console","className","children"],"sources":["/app/frontend/src/components/TunnelStatusWidget.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Instagram, CheckCircle, AlertCircle, ArrowRight } from 'lucide-react';\nimport axios from 'axios';\n\nconst TunnelStatusWidget = ({ user }) => {\n  const [tunnelStatus, setTunnelStatus] = useState('checking');\n  const [instagramAccounts, setInstagramAccounts] = useState([]);\n\n  const API_BASE = process.env.REACT_APP_BACKEND_URL || '';\n\n  useEffect(() => {\n    if (user) {\n      checkTunnelStatus();\n    }\n  }, [user]);\n\n  const checkTunnelStatus = async () => {\n    try {\n      const response = await axios.get(`${API_BASE}/api/debug/instagram-complete-diagnosis`);\n      const diagnosis = response.data;\n      \n      if (diagnosis.instagram_accounts && diagnosis.instagram_accounts.length > 0) {\n        setInstagramAccounts(diagnosis.instagram_accounts);\n        \n        const hasLogicampBerger = diagnosis.instagram_accounts.some(\n          account => account.username === 'logicamp_berger'\n        );\n        \n        setTunnelStatus(hasLogicampBerger ? 'ready' : 'no_logicamp');\n      } else {\n        setTunnelStatus('no_instagram');\n      }\n    } catch (error) {\n      console.error('Erreur check tunnel status:', error);\n      setTunnelStatus('error');\n    }\n  };\n\n  if (tunnelStatus === 'ready') {\n    return (\n      <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center\">\n              <Instagram className=\"w-5 h-5 text-green-600\" />\n            </div>\n            <div>\n              <h3 className=\"font-semibold text-green-900\">Tunnel Instagram Actif</h3>\n              <p className=\"text-sm text-green-700\">@logicamp_berger connecté</p>\n            </div>\n          </div>\n          <CheckCircle className=\"w-5 h-5 text-green-600\" />\n        </div>\n      </div>\n    );\n  }\n\n  if (tunnelStatus === 'no_instagram' || tunnelStatus === 'no_logicamp') {\n    return (\n      <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center\">\n              <AlertCircle className=\"w-5 h-5 text-yellow-600\" />\n            </div>\n            <div>\n              <h3 className=\"font-semibold text-yellow-900\">\n                {tunnelStatus === 'no_instagram' ? 'Tunnel Instagram Inactif' : '@logicamp_berger Manquant'}\n              </h3>\n              <p className=\"text-sm text-yellow-700\">\n                {tunnelStatus === 'no_instagram' \n                  ? 'Aucun compte Instagram connecté' \n                  : `${instagramAccounts.length} compte(s) trouvé(s), mais pas @logicamp_berger`\n                }\n              </p>\n            </div>\n          </div>\n          <ArrowRight className=\"w-5 h-5 text-yellow-600\" />\n        </div>\n        <div className=\"mt-3 pt-3 border-t border-yellow-200\">\n          <p className=\"text-xs text-yellow-700\">\n            Activez le tunnel dans l'onglet \"Tunnel Instagram\" pour publier automatiquement sur Instagram\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  if (tunnelStatus === 'checking') {\n    return (\n      <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n        <div className=\"flex items-center space-x-3\">\n          <div className=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\">\n            <div className=\"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin\" />\n          </div>\n          <div>\n            <h3 className=\"font-semibold text-blue-900\">Vérification Tunnel Instagram</h3>\n            <p className=\"text-sm text-blue-700\">Analyse des comptes connectés...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return null;\n};\n\nexport default TunnelStatusWidget;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}